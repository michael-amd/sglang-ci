[nightly] ==========================================
[nightly] SGL Nightly Benchmark Started
[nightly] ==========================================
[nightly] Command: perf_nightly.sh --model=deepseek --model-path=/data2/models/amd-DeepSeek-R1-MXFP4-Preview --model-name=DeepSeek-R1-MXFP4-Preview --mode=online --hardware=mi35x --enable-dp-test --teams-webhook-url=https://prod-99.westus.logic.azure.com/workflows/44b23afb37e74288b6b006c60bbe65b2/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=ucbP9AJ9WeZtxe95Wmi8TfLUjiEo0AZSZP4Y_cNgWS0
[nightly] Start time: 2025-10-18 14:50:01 PDT
[nightly] Machine: smci355-ccs-aus-m15-21.cs-aus.dcgpu
[nightly] Working directory: /mnt/raid/michael/sglang-ci
[nightly] Script location: /mnt/raid/michael/sglang-ci/perf_nightly.sh
[nightly] Process ID: 3155509
[nightly] ==========================================

[nightly] Runtime Environment:
[nightly] User: michaezh | Groups: michaezh spack everyone... | Docker: /usr/bin/docker
[nightly] Testing Docker daemon access...
[nightly] Docker daemon accessible - proceeding...
[nightly] Teams webhook URL provided via command line - notifications enabled
[nightly] DeepSeek DP test enabled via command line
[nightly] DP test implies DP attention checks
[nightly] Custom model path provided: /data2/models/amd-DeepSeek-R1-MXFP4-Preview
[nightly] Hardware: mi35x, ROCM Version: rocm700
[nightly] Custom model name provided: DeepSeek-R1-MXFP4-Preview
[nightly] Model: deepseek, Mode(s): online
[nightly] Created process lock: /tmp/perf_nightly_deepseek.lock
[nightly] GPU is busy. Attempting to stop running Docker containers...
[nightly] Stopping running containers: 5379643125e9
[nightly] Waiting 15s for GPU to become idle...
[nightly] WARN: GPU may still be busy, but proceeding as requested.
[nightly] Searching for non-SRT images for deepseek for the last 1 days...
[nightly] Searching for non-SRT mi35x image in 'rocm/sgl-dev' for date 20251018...
[nightly] Found candidate tag for day -0: v0.5.3.post3-rocm700-mi35x-20251018
[nightly] Found local image: rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251018
[nightly] Successfully obtained image for date 20251018: rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251018
[nightly] Found 1 valid image(s) to run benchmarks on:
[nightly]   - rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251018

[nightly] ==========================================
[nightly] Starting benchmarks for image: rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251018
[nightly] ==========================================
[nightly] Checking GPU status before starting benchmarks for rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251018...
[nightly] GPU is busy. Attempting to stop running Docker containers...
[nightly] Stopping running containers: b82cbb2b661b
[nightly] Waiting 15s for GPU to become idle...
[nightly] WARN: GPU may still be busy, but proceeding as requested.
[nightly] Checking benchmark completion in: /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251018_DeepSeek-R1-MXFP4-Preview_FP8_online
[nightly] Found 0 completed benchmark runs
[nightly] INFO: Found 0/15 completed runs for rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251018 (online). Proceeding with benchmarks.
[nightly] Using Docker image: rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251018
[nightly] Container name: sgl-dev_v0.5.3.post3-rocm700-mi35x-20251018
[nightly] Reusing container sgl-dev_v0.5.3.post3-rocm700-mi35x-20251018
[nightly] === Starting benchmark execution ===
[nightly] === Starting nightly DEEPSEEK online benchmark ===
[nightly] Launching deepseek_perf_online_csv.sh inside sgl-dev_v0.5.3.post3-rocm700-mi35x-20251018
[nightly] Passing --model-name='DeepSeek-R1-MXFP4-Preview' to DeepSeek benchmark
[nightly] Adding --check-dp-attention flag for DeepSeek online benchmark
[nightly] Adding --enable-dp-test flag for DeepSeek online benchmark
[dp] DP test enabled - setting runs per concurrency to 1
✅ Parameter validation passed
[online] Script started at: 2025-10-18 14:50:33 PDT
Scanning existing logs to check if all benchmarks are already complete...
Checking GSM8K log status...
Missing: GSM8K log file (/mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251018_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_client_log_DeepSeek-R1-MXFP4-Preview_gsm8k.log)
Checking serving benchmark logs...
Missing: Concurrency 128, Run 1
Missing: Concurrency 64, Run 1
Missing: Concurrency 16, Run 1
Missing: Concurrency 4, Run 1
Missing: Concurrency 1, Run 1
Scan complete: 5 total runs needed, 5 missing/incomplete
❌ Missing 5 serving benchmark runs.
❌ GSM8K benchmark is missing, empty, or incomplete.
Server startup required.
Clearing previous logs...
Starting SGLang server for online GSM8K benchmark...
[DEBUG] Using Data Parallel attention settings with SGLANG_USE_AITER=1
[DEBUG] Enabling SGLANG_USE_ROCM700A for ROCm 700 image
Waiting for SGLang server (PID: 46) to start... (Max 15 minutes)
Server logs are being written to: /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251018_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_server.log
.......................
SGLang server started successfully after 116 seconds.
=== Online GSM8K Benchmark: TP=8, Questions=2000, Parallel=2000, Shots=5 ===
[progress] Total benchmark runs to execute: 10 (GSM8K: 5, Serving: 5) - DP test mode
[progress] [--------------------------------------------------] 0/10 (0%) 
Starting GSM8K Online Benchmark...
Running 5 test iterations...
Executing GSM8K test Run 1 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:16<5:53:48, 16.11s/it]  0%|          | 2/1319 [00:16<2:31:46,  6.91s/it]  0%|          | 6/1319 [00:16<35:30,  1.62s/it]    1%|          | 16/1319 [00:16<09:32,  2.27it/s]  3%|▎         | 36/1319 [00:17<03:10,  6.74it/s]  3%|▎         | 46/1319 [00:17<02:11,  9.68it/s]  5%|▌         | 69/1319 [00:17<01:07, 18.46it/s]  6%|▌         | 82/1319 [00:17<00:50, 24.70it/s]  7%|▋         | 97/1319 [00:17<00:35, 33.97it/s]  8%|▊         | 110/1319 [00:17<00:28, 42.49it/s] 10%|█         | 136/1319 [00:17<00:18, 62.92it/s] 12%|█▏        | 160/1319 [00:17<00:13, 86.78it/s] 12%|█▏        | 163/1319 [00:17<00:10, 113.02it/s] 14%|█▍        | 183/1319 [00:18<00:10, 108.98it/s] 15%|█▌        | 200/1319 [00:18<00:10, 103.43it/s] 17%|█▋        | 223/1319 [00:18<00:10, 108.59it/s] 18%|█▊        | 244/1319 [00:18<00:08, 127.27it/s] 19%|█▉        | 251/1319 [00:18<00:05, 200.29it/s] 19%|█▉        | 251/1319 [00:18<00:05, 200.29it/s] 19%|█▉        | 251/1319 [00:18<00:05, 200.29it/s] 19%|█▉        | 251/1319 [00:18<00:05, 200.29it/s] 21%|██        | 273/1319 [00:18<00:06, 160.91it/s] 22%|██▏       | 292/1319 [00:18<00:06, 166.00it/s] 22%|██▏       | 293/1319 [00:18<00:05, 172.47it/s] 24%|██▎       | 312/1319 [00:19<00:05, 175.14it/s] 24%|██▍       | 316/1319 [00:19<00:05, 184.83it/s] 24%|██▍       | 316/1319 [00:19<00:05, 184.83it/s] 25%|██▌       | 336/1319 [00:19<00:05, 186.63it/s] 26%|██▌       | 338/1319 [00:19<00:05, 190.54it/s] 27%|██▋       | 358/1319 [00:19<00:06, 150.26it/s] 29%|██▊       | 378/1319 [00:19<00:05, 161.55it/s] 31%|███       | 408/1319 [00:19<00:05, 168.90it/s] 34%|███▎      | 443/1319 [00:19<00:04, 182.70it/s] 36%|███▌      | 472/1319 [00:19<00:04, 179.42it/s] 38%|███▊      | 506/1319 [00:20<00:04, 183.72it/s] 41%|████      | 535/1319 [00:20<00:04, 175.52it/s] 43%|████▎     | 566/1319 [00:20<00:04, 174.70it/s] 45%|████▌     | 594/1319 [00:20<00:04, 169.13it/s] 46%|████▋     | 612/1319 [00:20<00:04, 148.05it/s] 49%|████▉     | 648/1319 [00:21<00:04, 166.76it/s] 51%|█████▏    | 677/1319 [00:21<00:03, 169.48it/s] 53%|█████▎    | 696/1319 [00:21<00:04, 153.97it/s] 55%|█████▌    | 730/1319 [00:21<00:03, 170.00it/s] 57%|█████▋    | 758/1319 [00:21<00:03, 167.26it/s] 58%|█████▊    | 759/1319 [00:21<00:03, 167.10it/s] 60%|█████▉    | 786/1319 [00:21<00:03, 164.26it/s] 62%|██████▏   | 814/1319 [00:22<00:03, 164.70it/s] 64%|██████▍   | 841/1319 [00:22<00:02, 163.63it/s] 65%|██████▌   | 858/1319 [00:22<00:03, 153.49it/s] 67%|██████▋   | 878/1319 [00:22<00:02, 148.09it/s] 67%|██████▋   | 879/1319 [00:22<00:03, 146.06it/s] 69%|██████▉   | 908/1319 [00:22<00:02, 170.80it/s] 71%|███████   | 937/1319 [00:22<00:02, 184.68it/s] 73%|███████▎  | 962/1319 [00:22<00:01, 186.64it/s] 75%|███████▍  | 984/1319 [00:22<00:01, 180.91it/s] 76%|███████▋  | 1006/1319 [00:23<00:01, 176.59it/s] 78%|███████▊  | 1032/1319 [00:23<00:01, 182.40it/s] 80%|████████  | 1056/1319 [00:23<00:01, 184.68it/s] 82%|████████▏ | 1075/1319 [00:23<00:01, 178.18it/s] 83%|████████▎ | 1093/1319 [00:23<00:01, 170.53it/s] 83%|████████▎ | 1095/1319 [00:23<00:01, 167.16it/s] 84%|████████▍ | 1113/1319 [00:23<00:01, 164.28it/s] 84%|████████▍ | 1114/1319 [00:23<00:01, 164.61it/s] 86%|████████▌ | 1131/1319 [00:23<00:01, 155.47it/s] 88%|████████▊ | 1159/1319 [00:23<00:00, 176.56it/s] 89%|████████▉ | 1177/1319 [00:24<00:00, 160.40it/s] 89%|████████▉ | 1178/1319 [00:24<00:00, 152.17it/s] 91%|█████████ | 1194/1319 [00:24<00:00, 141.06it/s] 92%|█████████▏| 1211/1319 [00:24<00:00, 145.25it/s] 93%|█████████▎| 1226/1319 [00:24<00:00, 119.28it/s] 94%|█████████▍| 1239/1319 [00:24<00:00, 115.92it/s] 95%|█████████▍| 1252/1319 [00:24<00:00, 90.36it/s]  96%|█████████▌| 1263/1319 [00:25<00:00, 84.50it/s] 97%|█████████▋| 1273/1319 [00:25<00:00, 79.52it/s] 97%|█████████▋| 1282/1319 [00:25<00:00, 48.26it/s] 98%|█████████▊| 1290/1319 [00:25<00:00, 51.54it/s] 98%|█████████▊| 1297/1319 [00:26<00:00, 40.87it/s] 99%|█████████▉| 1303/1319 [00:26<00:00, 31.58it/s] 99%|█████████▉| 1308/1319 [00:26<00:00, 22.16it/s] 99%|█████████▉| 1312/1319 [00:30<00:01,  4.44it/s]100%|██████████| 1319/1319 [00:31<00:00, 42.54it/s]
Accuracy: 0.939
Invalid: 0.000
Latency: 40.610 s
Output throughput: 3150.415 token/s
Run 1 completed in 45 seconds
Run 1: Accuracy: 0.939
[progress] [=====---------------------------------------------] 1/10 (10%)  | GSM8K: Run 1
Executing GSM8K test Run 2 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:11<4:08:38, 11.32s/it]  0%|          | 3/1319 [00:11<1:06:41,  3.04s/it]  0%|          | 4/1319 [00:11<46:30,  2.12s/it]    0%|          | 5/1319 [00:12<34:34,  1.58s/it]  1%|          | 7/1319 [00:12<18:46,  1.17it/s]  2%|▏         | 20/1319 [00:12<03:30,  6.17it/s]  2%|▏         | 32/1319 [00:12<01:50, 11.62it/s]  4%|▎         | 47/1319 [00:13<01:00, 20.89it/s]  5%|▍         | 65/1319 [00:13<00:38, 32.31it/s]  7%|▋         | 89/1319 [00:13<00:25, 49.00it/s]  8%|▊         | 106/1319 [00:13<00:19, 62.77it/s] 10%|▉         | 127/1319 [00:13<00:14, 83.94it/s] 11%|█         | 142/1319 [00:13<00:14, 83.61it/s] 12%|█▏        | 157/1319 [00:13<00:12, 95.29it/s] 13%|█▎        | 172/1319 [00:14<00:12, 89.61it/s] 15%|█▍        | 197/1319 [00:14<00:10, 102.71it/s] 17%|█▋        | 219/1319 [00:14<00:08, 125.10it/s] 18%|█▊        | 235/1319 [00:14<00:09, 111.65it/s] 20%|█▉        | 260/1319 [00:14<00:07, 140.02it/s] 21%|██        | 279/1319 [00:14<00:08, 124.74it/s] 21%|██        | 280/1319 [00:14<00:08, 117.17it/s] 23%|██▎       | 299/1319 [00:14<00:08, 120.78it/s] 24%|██▎       | 313/1319 [00:15<00:08, 123.84it/s] 24%|██▍       | 317/1319 [00:15<00:07, 128.54it/s] 25%|██▌       | 331/1319 [00:15<00:07, 130.05it/s] 26%|██▌       | 340/1319 [00:15<00:05, 169.03it/s] 26%|██▌       | 342/1319 [00:15<00:05, 169.03it/s] 26%|██▌       | 343/1319 [00:15<00:05, 169.03it/s] 26%|██▌       | 343/1319 [00:15<00:05, 169.03it/s] 26%|██▌       | 343/1319 [00:15<00:05, 169.03it/s] 26%|██▌       | 343/1319 [00:15<00:05, 169.03it/s] 27%|██▋       | 361/1319 [00:15<00:05, 170.51it/s] 29%|██▊       | 379/1319 [00:15<00:06, 140.90it/s] 29%|██▉       | 383/1319 [00:15<00:07, 127.55it/s] 31%|███       | 409/1319 [00:15<00:06, 136.91it/s] 34%|███▍      | 450/1319 [00:15<00:05, 172.14it/s] 36%|███▌      | 476/1319 [00:15<00:05, 166.27it/s] 38%|███▊      | 503/1319 [00:16<00:04, 164.24it/s] 38%|███▊      | 505/1319 [00:16<00:04, 164.59it/s] 40%|████      | 530/1319 [00:16<00:04, 159.73it/s] 43%|████▎     | 571/1319 [00:16<00:04, 179.90it/s] 45%|████▍     | 592/1319 [00:16<00:04, 159.52it/s] 47%|████▋     | 626/1319 [00:16<00:04, 168.89it/s] 50%|████▉     | 658/1319 [00:17<00:03, 176.36it/s] 52%|█████▏    | 682/1319 [00:17<00:03, 165.77it/s] 52%|█████▏    | 692/1319 [00:17<00:03, 166.09it/s] 53%|█████▎    | 696/1319 [00:17<00:03, 166.09it/s] 53%|█████▎    | 696/1319 [00:17<00:03, 166.09it/s] 53%|█████▎    | 696/1319 [00:17<00:03, 166.09it/s] 53%|█████▎    | 696/1319 [00:17<00:03, 166.09it/s] 53%|█████▎    | 696/1319 [00:17<00:03, 166.09it/s] 54%|█████▍    | 713/1319 [00:17<00:04, 145.87it/s] 55%|█████▍    | 719/1319 [00:17<00:04, 133.18it/s] 56%|█████▌    | 733/1319 [00:17<00:04, 118.29it/s] 58%|█████▊    | 761/1319 [00:17<00:04, 132.23it/s] 60%|█████▉    | 787/1319 [00:17<00:03, 139.12it/s] 62%|██████▏   | 815/1319 [00:18<00:03, 147.85it/s] 64%|██████▎   | 839/1319 [00:18<00:03, 151.55it/s] 65%|██████▍   | 857/1319 [00:18<00:03, 143.05it/s] 66%|██████▌   | 872/1319 [00:18<00:03, 130.57it/s] 67%|██████▋   | 885/1319 [00:18<00:03, 118.08it/s] 68%|██████▊   | 899/1319 [00:18<00:03, 111.71it/s] 70%|██████▉   | 921/1319 [00:18<00:03, 126.74it/s] 72%|███████▏  | 950/1319 [00:19<00:02, 152.94it/s] 74%|███████▍  | 978/1319 [00:19<00:02, 169.33it/s] 76%|███████▌  | 999/1319 [00:19<00:01, 166.02it/s] 78%|███████▊  | 1023/1319 [00:19<00:01, 170.45it/s] 79%|███████▉  | 1041/1319 [00:19<00:01, 160.11it/s] 81%|████████  | 1064/1319 [00:19<00:01, 164.70it/s] 82%|████████▏ | 1081/1319 [00:19<00:01, 154.07it/s] 83%|████████▎ | 1097/1319 [00:19<00:01, 147.67it/s] 84%|████████▍ | 1114/1319 [00:20<00:01, 146.95it/s] 86%|████████▌ | 1129/1319 [00:20<00:01, 128.95it/s] 87%|████████▋ | 1148/1319 [00:20<00:01, 138.17it/s] 88%|████████▊ | 1163/1319 [00:20<00:01, 136.18it/s] 89%|████████▉ | 1177/1319 [00:20<00:01, 122.72it/s] 91%|█████████ | 1198/1319 [00:20<00:00, 135.91it/s] 92%|█████████▏| 1212/1319 [00:20<00:00, 125.34it/s] 93%|█████████▎| 1225/1319 [00:21<00:00, 109.35it/s] 94%|█████████▍| 1237/1319 [00:21<00:00, 100.66it/s] 95%|█████████▌| 1255/1319 [00:21<00:00, 115.11it/s] 96%|█████████▌| 1267/1319 [00:21<00:00, 68.96it/s]  96%|█████████▌| 1268/1319 [00:21<00:00, 53.49it/s] 97%|█████████▋| 1276/1319 [00:21<00:00, 51.85it/s] 97%|█████████▋| 1283/1319 [00:22<00:00, 43.70it/s] 98%|█████████▊| 1289/1319 [00:22<00:00, 35.54it/s] 98%|█████████▊| 1294/1319 [00:22<00:00, 33.90it/s] 98%|█████████▊| 1298/1319 [00:23<00:00, 23.74it/s] 99%|█████████▊| 1302/1319 [00:23<00:01, 16.58it/s] 99%|█████████▉| 1305/1319 [00:24<00:01, 12.00it/s] 99%|█████████▉| 1307/1319 [00:26<00:03,  3.81it/s] 99%|█████████▉| 1309/1319 [00:27<00:02,  4.06it/s]100%|██████████| 1319/1319 [00:27<00:00, 48.61it/s]
Accuracy: 0.945
Invalid: 0.000
Latency: 27.516 s
Output throughput: 4858.417 token/s
Run 2 completed in 32 seconds
Run 2: Accuracy: 0.945
[progress] [==========----------------------------------------] 2/10 (20%)  | GSM8K: Run 2
Executing GSM8K test Run 3 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:10<3:43:23, 10.17s/it]  0%|          | 2/1319 [00:11<1:43:04,  4.70s/it]  0%|          | 3/1319 [00:11<58:50,  2.68s/it]    0%|          | 4/1319 [00:11<37:15,  1.70s/it]  0%|          | 6/1319 [00:11<18:35,  1.18it/s]  1%|          | 12/1319 [00:11<06:08,  3.55it/s]  2%|▏         | 22/1319 [00:12<02:33,  8.46it/s]  3%|▎         | 33/1319 [00:12<01:22, 15.57it/s]  3%|▎         | 35/1319 [00:12<00:34, 37.10it/s]  3%|▎         | 36/1319 [00:12<00:34, 37.10it/s]  3%|▎         | 46/1319 [00:12<00:31, 40.92it/s]  5%|▌         | 67/1319 [00:12<00:18, 66.61it/s]  7%|▋         | 86/1319 [00:12<00:16, 76.63it/s]  8%|▊         | 105/1319 [00:12<00:12, 96.98it/s]  8%|▊         | 106/1319 [00:12<00:10, 117.79it/s]  9%|▉         | 122/1319 [00:12<00:10, 111.67it/s] 11%|█         | 141/1319 [00:13<00:09, 121.68it/s] 13%|█▎        | 166/1319 [00:13<00:09, 124.84it/s] 13%|█▎        | 169/1319 [00:13<00:08, 128.46it/s] 14%|█▍        | 189/1319 [00:13<00:07, 142.92it/s] 14%|█▍        | 191/1319 [00:13<00:07, 157.87it/s] 16%|█▌        | 209/1319 [00:13<00:08, 134.44it/s] 17%|█▋        | 228/1319 [00:13<00:09, 120.77it/s] 18%|█▊        | 242/1319 [00:13<00:08, 123.92it/s] 19%|█▉        | 256/1319 [00:13<00:08, 126.02it/s] 20%|██        | 270/1319 [00:14<00:08, 128.13it/s] 21%|██        | 273/1319 [00:14<00:07, 132.17it/s] 22%|██▏       | 287/1319 [00:14<00:07, 133.20it/s] 23%|██▎       | 301/1319 [00:14<00:07, 134.35it/s] 24%|██▍       | 315/1319 [00:14<00:07, 134.94it/s] 24%|██▍       | 320/1319 [00:14<00:06, 142.94it/s] 24%|██▍       | 321/1319 [00:14<00:06, 142.94it/s] 26%|██▌       | 337/1319 [00:14<00:06, 142.83it/s] 26%|██▌       | 340/1319 [00:14<00:06, 150.10it/s] 26%|██▌       | 340/1319 [00:14<00:06, 150.10it/s] 27%|██▋       | 356/1319 [00:14<00:06, 152.67it/s] 28%|██▊       | 372/1319 [00:14<00:07, 130.89it/s] 31%|███       | 404/1319 [00:14<00:05, 154.01it/s] 33%|███▎      | 436/1319 [00:15<00:05, 166.73it/s] 33%|███▎      | 437/1319 [00:15<00:04, 176.55it/s] 36%|███▌      | 473/1319 [00:15<00:04, 186.83it/s] 39%|███▊      | 510/1319 [00:15<00:04, 193.85it/s] 41%|████      | 535/1319 [00:15<00:04, 174.60it/s] 43%|████▎     | 567/1319 [00:15<00:04, 173.95it/s] 45%|████▍     | 593/1319 [00:15<00:04, 164.96it/s] 47%|████▋     | 615/1319 [00:16<00:04, 152.31it/s] 49%|████▊     | 642/1319 [00:16<00:04, 155.82it/s] 51%|█████     | 671/1319 [00:16<00:04, 161.93it/s] 53%|█████▎    | 700/1319 [00:16<00:03, 165.22it/s] 56%|█████▌    | 734/1319 [00:16<00:03, 175.64it/s] 57%|█████▋    | 758/1319 [00:16<00:03, 166.25it/s] 59%|█████▉    | 778/1319 [00:17<00:03, 152.66it/s] 61%|██████    | 805/1319 [00:17<00:03, 158.06it/s] 62%|██████▏   | 821/1319 [00:17<00:03, 154.75it/s] 63%|██████▎   | 837/1319 [00:17<00:03, 151.85it/s] 65%|██████▌   | 861/1319 [00:17<00:02, 165.99it/s] 68%|██████▊   | 892/1319 [00:17<00:02, 187.01it/s] 70%|██████▉   | 921/1319 [00:17<00:02, 196.92it/s] 70%|██████▉   | 922/1319 [00:17<00:01, 206.03it/s] 72%|███████▏  | 948/1319 [00:18<00:01, 202.72it/s] 74%|███████▎  | 972/1319 [00:18<00:01, 196.48it/s] 76%|███████▌  | 999/1319 [00:18<00:01, 198.71it/s] 77%|███████▋  | 1019/1319 [00:18<00:01, 183.81it/s] 79%|███████▊  | 1038/1319 [00:18<00:01, 171.42it/s] 80%|████████  | 1056/1319 [00:18<00:01, 164.01it/s] 81%|████████▏ | 1073/1319 [00:18<00:01, 158.62it/s] 83%|████████▎ | 1089/1319 [00:18<00:01, 151.60it/s] 84%|████████▍ | 1105/1319 [00:19<00:01, 146.86it/s] 85%|████████▍ | 1120/1319 [00:19<00:01, 142.29it/s] 86%|████████▌ | 1135/1319 [00:19<00:01, 142.60it/s] 88%|████████▊ | 1160/1319 [00:19<00:00, 161.46it/s] 89%|████████▉ | 1177/1319 [00:19<00:00, 152.74it/s] 91%|█████████ | 1196/1319 [00:19<00:00, 157.58it/s] 92%|█████████▏| 1212/1319 [00:19<00:00, 135.35it/s] 93%|█████████▎| 1226/1319 [00:19<00:00, 118.24it/s] 94%|█████████▍| 1239/1319 [00:20<00:00, 115.12it/s] 95%|█████████▍| 1251/1319 [00:20<00:00, 99.78it/s]  96%|█████████▌| 1262/1319 [00:20<00:00, 90.19it/s] 96%|█████████▌| 1263/1319 [00:20<00:00, 85.67it/s] 96%|█████████▋| 1272/1319 [00:20<00:00, 73.78it/s] 97%|█████████▋| 1280/1319 [00:20<00:00, 62.72it/s] 98%|█████████▊| 1287/1319 [00:21<00:00, 48.49it/s] 98%|█████████▊| 1293/1319 [00:21<00:00, 38.43it/s] 98%|█████████▊| 1298/1319 [00:21<00:00, 35.96it/s] 99%|█████████▊| 1302/1319 [00:21<00:00, 34.71it/s] 99%|█████████▉| 1306/1319 [00:21<00:00, 34.03it/s] 99%|█████████▉| 1310/1319 [00:23<00:01,  8.45it/s]100%|█████████▉| 1313/1319 [00:25<00:01,  3.90it/s]100%|██████████| 1319/1319 [00:25<00:00, 50.98it/s]
Accuracy: 0.943
Invalid: 0.000
Latency: 26.060 s
Output throughput: 4997.873 token/s
Run 3 completed in 32 seconds
Run 3: Accuracy: 0.943
[progress] [===============-----------------------------------] 3/10 (30%)  | GSM8K: Run 3
Executing GSM8K test Run 4 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:10<3:55:35, 10.72s/it]  0%|          | 2/1319 [00:11<1:51:49,  5.09s/it]  0%|          | 5/1319 [00:12<32:41,  1.49s/it]    2%|▏         | 20/1319 [00:12<05:24,  4.00it/s]  2%|▏         | 23/1319 [00:12<02:26,  8.82it/s]  3%|▎         | 38/1319 [00:12<01:29, 14.27it/s]  4%|▍         | 56/1319 [00:12<00:54, 23.39it/s]  6%|▌         | 76/1319 [00:12<00:36, 34.08it/s]  7%|▋         | 88/1319 [00:12<00:29, 41.73it/s]  8%|▊         | 107/1319 [00:12<00:20, 58.47it/s]  9%|▉         | 122/1319 [00:13<00:18, 63.24it/s] 10%|█         | 138/1319 [00:13<00:15, 77.74it/s] 12%|█▏        | 157/1319 [00:13<00:13, 84.36it/s] 13%|█▎        | 175/1319 [00:13<00:11, 101.34it/s] 14%|█▍        | 191/1319 [00:13<00:11, 96.42it/s]  16%|█▌        | 208/1319 [00:13<00:11, 93.94it/s] 18%|█▊        | 232/1319 [00:13<00:08, 122.17it/s] 18%|█▊        | 237/1319 [00:13<00:06, 174.70it/s] 18%|█▊        | 239/1319 [00:13<00:06, 174.70it/s] 20%|█▉        | 261/1319 [00:14<00:07, 146.38it/s] 21%|██        | 279/1319 [00:14<00:06, 153.26it/s] 23%|██▎       | 297/1319 [00:14<00:06, 157.77it/s] 24%|██▍       | 315/1319 [00:14<00:06, 161.22it/s] 24%|██▍       | 317/1319 [00:14<00:06, 166.29it/s] 25%|██▌       | 336/1319 [00:14<00:05, 166.82it/s] 27%|██▋       | 356/1319 [00:14<00:06, 138.44it/s] 30%|██▉       | 393/1319 [00:14<00:05, 167.15it/s] 33%|███▎      | 430/1319 [00:15<00:04, 185.24it/s] 35%|███▍      | 459/1319 [00:15<00:04, 181.06it/s] 38%|███▊      | 495/1319 [00:15<00:04, 187.70it/s] 38%|███▊      | 497/1319 [00:15<00:04, 193.74it/s] 39%|███▉      | 519/1319 [00:15<00:04, 169.89it/s] 42%|████▏     | 551/1319 [00:15<00:03, 199.61it/s] 43%|████▎     | 573/1319 [00:15<00:04, 173.91it/s] 45%|████▍     | 592/1319 [00:16<00:04, 152.36it/s] 46%|████▌     | 609/1319 [00:16<00:05, 134.53it/s] 48%|████▊     | 637/1319 [00:16<00:04, 145.51it/s] 51%|█████     | 674/1319 [00:16<00:03, 169.26it/s] 52%|█████▏    | 692/1319 [00:16<00:04, 149.47it/s] 55%|█████▌    | 726/1319 [00:16<00:03, 164.24it/s] 57%|█████▋    | 756/1319 [00:17<00:03, 167.89it/s] 58%|█████▊    | 759/1319 [00:17<00:03, 172.14it/s] 59%|█████▉    | 781/1319 [00:17<00:03, 152.66it/s] 61%|██████    | 800/1319 [00:17<00:03, 141.96it/s] 62%|██████▏   | 815/1319 [00:17<00:03, 140.68it/s] 63%|██████▎   | 834/1319 [00:17<00:03, 142.10it/s] 65%|██████▌   | 861/1319 [00:17<00:02, 154.02it/s] 67%|██████▋   | 882/1319 [00:17<00:02, 150.40it/s] 68%|██████▊   | 901/1319 [00:18<00:02, 153.21it/s] 71%|███████   | 934/1319 [00:18<00:02, 181.43it/s] 72%|███████▏  | 956/1319 [00:18<00:02, 177.55it/s] 74%|███████▍  | 974/1319 [00:18<00:02, 164.47it/s] 76%|███████▌  | 998/1319 [00:18<00:01, 169.65it/s] 77%|███████▋  | 1017/1319 [00:18<00:01, 161.72it/s] 79%|███████▊  | 1038/1319 [00:18<00:01, 160.60it/s] 80%|████████  | 1057/1319 [00:18<00:01, 156.21it/s] 82%|████████▏ | 1078/1319 [00:19<00:01, 158.46it/s] 83%|████████▎ | 1094/1319 [00:19<00:01, 152.45it/s] 84%|████████▍ | 1113/1319 [00:19<00:01, 158.25it/s] 86%|████████▌ | 1129/1319 [00:19<00:01, 148.06it/s] 86%|████████▌ | 1130/1319 [00:19<00:01, 143.43it/s] 87%|████████▋ | 1145/1319 [00:19<00:01, 135.67it/s] 88%|████████▊ | 1159/1319 [00:19<00:01, 120.00it/s] 89%|████████▉ | 1173/1319 [00:19<00:01, 121.50it/s] 90%|█████████ | 1191/1319 [00:19<00:00, 132.78it/s] 91%|█████████▏| 1205/1319 [00:20<00:00, 122.59it/s] 92%|█████████▏| 1218/1319 [00:20<00:00, 107.25it/s] 93%|█████████▎| 1232/1319 [00:20<00:00, 109.16it/s] 94%|█████████▍| 1244/1319 [00:20<00:00, 100.70it/s] 95%|█████████▌| 1255/1319 [00:20<00:00, 93.36it/s]  96%|█████████▌| 1265/1319 [00:20<00:00, 70.13it/s] 97%|█████████▋| 1273/1319 [00:21<00:00, 60.21it/s] 97%|█████████▋| 1280/1319 [00:21<00:00, 59.38it/s] 98%|█████████▊| 1287/1319 [00:21<00:00, 52.73it/s] 98%|█████████▊| 1293/1319 [00:21<00:00, 39.78it/s] 98%|█████████▊| 1294/1319 [00:21<00:00, 34.31it/s] 98%|█████████▊| 1299/1319 [00:21<00:00, 34.87it/s] 99%|█████████▉| 1303/1319 [00:22<00:01, 15.22it/s] 99%|█████████▉| 1306/1319 [00:24<00:02,  6.17it/s] 99%|█████████▉| 1309/1319 [00:26<00:02,  4.03it/s]100%|██████████| 1319/1319 [00:26<00:00, 50.05it/s]
Accuracy: 0.945
Invalid: 0.000
Latency: 26.548 s
Output throughput: 5006.265 token/s
Run 4 completed in 31 seconds
Run 4: Accuracy: 0.945
[progress] [====================------------------------------] 4/10 (40%)  | GSM8K: Run 4
Executing GSM8K test Run 5 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:09<3:24:20,  9.30s/it]  0%|          | 2/1319 [00:09<1:32:45,  4.23s/it]  0%|          | 3/1319 [00:10<55:10,  2.52s/it]    0%|          | 6/1319 [00:10<19:32,  1.12it/s]  2%|▏         | 25/1319 [00:10<02:56,  7.33it/s]  3%|▎         | 38/1319 [00:10<01:39, 12.86it/s]  4%|▍         | 57/1319 [00:11<00:56, 22.39it/s]  6%|▌         | 79/1319 [00:11<00:35, 34.90it/s]  7%|▋         | 90/1319 [00:11<00:29, 41.80it/s]  8%|▊         | 108/1319 [00:11<00:21, 57.43it/s] 10%|█         | 137/1319 [00:11<00:14, 80.63it/s] 12%|█▏        | 152/1319 [00:11<00:12, 91.21it/s] 12%|█▏        | 154/1319 [00:11<00:11, 103.44it/s] 13%|█▎        | 169/1319 [00:12<00:12, 95.45it/s]  14%|█▍        | 183/1319 [00:12<00:10, 104.18it/s] 16%|█▌        | 209/1319 [00:12<00:09, 116.50it/s] 18%|█▊        | 233/1319 [00:12<00:09, 119.52it/s] 19%|█▊        | 247/1319 [00:12<00:08, 123.03it/s] 20%|█▉        | 261/1319 [00:12<00:08, 125.83it/s] 21%|██        | 275/1319 [00:12<00:08, 127.99it/s] 22%|██▏       | 289/1319 [00:12<00:07, 130.28it/s] 23%|██▎       | 303/1319 [00:12<00:07, 131.47it/s] 24%|██▍       | 320/1319 [00:13<00:07, 140.59it/s] 24%|██▍       | 323/1319 [00:13<00:06, 159.05it/s] 25%|██▍       | 327/1319 [00:13<00:06, 159.05it/s] 26%|██▌       | 346/1319 [00:13<00:06, 161.04it/s] 26%|██▋       | 347/1319 [00:13<00:05, 165.11it/s] 28%|██▊       | 364/1319 [00:13<00:05, 165.08it/s] 28%|██▊       | 366/1319 [00:13<00:05, 167.81it/s] 29%|██▉       | 383/1319 [00:13<00:05, 167.20it/s] 31%|███▏      | 413/1319 [00:13<00:05, 172.53it/s] 32%|███▏      | 416/1319 [00:13<00:04, 182.44it/s] 32%|███▏      | 419/1319 [00:13<00:04, 182.44it/s] 34%|███▍      | 447/1319 [00:13<00:04, 176.24it/s] 36%|███▌      | 475/1319 [00:13<00:04, 173.35it/s] 38%|███▊      | 501/1319 [00:14<00:04, 167.28it/s] 40%|████      | 533/1319 [00:14<00:04, 168.75it/s] 42%|████▏     | 559/1319 [00:14<00:04, 159.47it/s] 44%|████▍     | 578/1319 [00:14<00:05, 142.95it/s] 46%|████▌     | 602/1319 [00:14<00:05, 140.28it/s] 47%|████▋     | 621/1319 [00:14<00:05, 129.64it/s] 50%|████▉     | 655/1319 [00:15<00:04, 148.25it/s] 52%|█████▏    | 682/1319 [00:15<00:04, 152.87it/s] 52%|█████▏    | 685/1319 [00:15<00:04, 157.86it/s] 54%|█████▍    | 711/1319 [00:15<00:03, 157.27it/s] 56%|█████▌    | 734/1319 [00:15<00:03, 149.96it/s] 58%|█████▊    | 763/1319 [00:15<00:03, 156.25it/s] 58%|█████▊    | 766/1319 [00:15<00:03, 174.25it/s] 58%|█████▊    | 766/1319 [00:15<00:03, 174.25it/s] 58%|█████▊    | 767/1319 [00:15<00:03, 174.25it/s] 60%|█████▉    | 789/1319 [00:16<00:03, 158.46it/s] 61%|██████    | 805/1319 [00:16<00:03, 157.12it/s] 63%|██████▎   | 827/1319 [00:16<00:03, 155.72it/s] 64%|██████▍   | 850/1319 [00:16<00:03, 155.30it/s] 66%|██████▌   | 866/1319 [00:16<00:03, 140.66it/s] 67%|██████▋   | 881/1319 [00:16<00:03, 137.52it/s] 69%|██████▉   | 910/1319 [00:16<00:02, 161.28it/s] 71%|███████   | 936/1319 [00:16<00:02, 171.57it/s] 71%|███████   | 939/1319 [00:16<00:02, 180.83it/s] 73%|███████▎  | 958/1319 [00:17<00:02, 169.06it/s] 75%|███████▌  | 992/1319 [00:17<00:01, 196.42it/s] 77%|███████▋  | 1022/1319 [00:17<00:01, 205.77it/s] 79%|███████▉  | 1043/1319 [00:17<00:01, 194.12it/s] 81%|████████  | 1069/1319 [00:17<00:01, 201.46it/s] 83%|████████▎ | 1091/1319 [00:17<00:01, 197.19it/s] 84%|████████▍ | 1114/1319 [00:17<00:01, 203.89it/s] 86%|████████▌ | 1135/1319 [00:17<00:00, 191.73it/s] 88%|████████▊ | 1155/1319 [00:18<00:01, 151.11it/s] 89%|████████▉ | 1172/1319 [00:18<00:01, 134.92it/s] 90%|█████████ | 1188/1319 [00:18<00:00, 137.22it/s] 91%|█████████▏| 1206/1319 [00:18<00:00, 144.22it/s] 93%|█████████▎| 1222/1319 [00:18<00:00, 127.75it/s] 94%|█████████▎| 1236/1319 [00:18<00:00, 115.95it/s] 94%|█████████▍| 1237/1319 [00:18<00:00, 110.06it/s] 95%|█████████▍| 1249/1319 [00:19<00:00, 93.31it/s]  95%|█████████▌| 1259/1319 [00:19<00:00, 80.57it/s] 96%|█████████▌| 1268/1319 [00:19<00:00, 77.24it/s] 97%|█████████▋| 1277/1319 [00:19<00:00, 61.39it/s] 97%|█████████▋| 1285/1319 [00:19<00:00, 62.52it/s] 98%|█████████▊| 1292/1319 [00:19<00:00, 59.35it/s] 98%|█████████▊| 1299/1319 [00:20<00:00, 41.32it/s] 99%|█████████▉| 1304/1319 [00:20<00:00, 27.18it/s] 99%|█████████▉| 1308/1319 [00:21<00:00, 16.00it/s] 99%|█████████▉| 1311/1319 [00:22<00:01,  7.40it/s]100%|█████████▉| 1314/1319 [00:24<00:01,  4.42it/s]100%|██████████| 1319/1319 [00:24<00:00, 53.43it/s]
Accuracy: 0.945
Invalid: 0.000
Latency: 24.873 s
Output throughput: 5277.965 token/s
Run 5 completed in 30 seconds
Run 5: Accuracy: 0.945
[progress] [=========================-------------------------] 5/10 (50%)  | GSM8K: Run 5
GSM8K test completed in 171 seconds
Average Accuracy over 5 runs: 0.943
Average accuracy meets threshold (0.93).
✅ GSM8K benchmark completed successfully.
GSM8K log saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251018_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_client_log_DeepSeek-R1-MXFP4-Preview_gsm8k.log
Server log saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251018_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_server.log
Starting serving benchmark tests with different concurrency levels...
[online] Structured CSV initialized at /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251018_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/v0.5.3.post3-rocm700-mi35x-20251018_DeepSeek-R1-MXFP4-Preview_FP8_serving_dp_attention.csv
Processing concurrency 128 with 1 runs...
Running serving benchmark with concurrency 128 (Run 1) - 500 prompts...
Concurrency 128, Run 1 completed: 500 requests, (tok/s): tok/s output throughput, 38029.76ms E2E latency (166s)
[progress] [==============================--------------------] 6/10 (60%)  | Serving: C128 R1
✅ Best results for concurrency 128: E2E=38029.76ms, TTFT=12794.77ms, ITL=26.56ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 128: E2E=38029.76ms, TTFT=12794.77ms, ITL=26.56ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 128
Sleeping 3 seconds before next concurrency level...
Processing concurrency 64 with 1 runs...
Running serving benchmark with concurrency 64 (Run 1) - 500 prompts...
Concurrency 64, Run 1 completed: 500 requests, (tok/s): tok/s output throughput, 26266.26ms E2E latency (222s)
[progress] [===================================---------------] 7/10 (70%)  | Serving: C64 R1
✅ Best results for concurrency 64: E2E=26266.26ms, TTFT=6735.41ms, ITL=22.18ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 64: E2E=26266.26ms, TTFT=6735.41ms, ITL=22.18ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 64
Sleeping 3 seconds before next concurrency level...
Processing concurrency 16 with 1 runs...
Running serving benchmark with concurrency 16 (Run 1) - 128 prompts...
Concurrency 16, Run 1 completed: 128 requests, (tok/s): tok/s output throughput, 16430.16ms E2E latency (141s)
[progress] [========================================----------] 8/10 (80%)  | Serving: C16 R1
✅ Best results for concurrency 16: E2E=16430.16ms, TTFT=3275.49ms, ITL=16.37ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 16: E2E=16430.16ms, TTFT=3275.49ms, ITL=16.37ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 16
Sleeping 3 seconds before next concurrency level...
Processing concurrency 4 with 1 runs...
Running serving benchmark with concurrency 4 (Run 1) - 128 prompts...
Concurrency 4, Run 1 completed: 128 requests, (tok/s): tok/s output throughput, 12764.99ms E2E latency (420s)
[progress] [=============================================-----] 9/10 (90%)  | Serving: C4 R1
✅ Best results for concurrency 4: E2E=12764.99ms, TTFT=990.04ms, ITL=14.73ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 4: E2E=12764.99ms, TTFT=990.04ms, ITL=14.73ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 4
Sleeping 3 seconds before next concurrency level...
Processing concurrency 1 with 1 runs...
Running serving benchmark with concurrency 1 (Run 1) - 128 prompts...
[nightly] === Online benchmark dispatched for DEEPSEEK; check logs in sgl-dev_v0.5.3.post3-rocm700-mi35x-20251018 ===
[nightly] === Starting post-processing (CSV processing, plot generation, Teams notifications) ===
[nightly] Processing online CSV data and generating plots... Logs will be saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251018_DeepSeek-R1-MXFP4-Preview_FP8_online/process_and_generate_online_plots.log
[nightly] Using plot date from image tag: 20251018
OCI runtime exec failed: exec failed: unable to start container process: error executing setns process: exit status 1: unknown
[nightly] Cleaning up process lock...
