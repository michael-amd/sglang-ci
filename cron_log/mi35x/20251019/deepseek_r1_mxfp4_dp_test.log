[nightly] ==========================================
[nightly] SGL Nightly Benchmark Started
[nightly] ==========================================
[nightly] Command: perf_nightly.sh --model=deepseek --model-path=/data2/models/amd-DeepSeek-R1-MXFP4-Preview --model-name=DeepSeek-R1-MXFP4-Preview --mode=online --hardware=mi35x --enable-dp-test --teams-webhook-url=https://prod-99.westus.logic.azure.com/workflows/44b23afb37e74288b6b006c60bbe65b2/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=ucbP9AJ9WeZtxe95Wmi8TfLUjiEo0AZSZP4Y_cNgWS0
[nightly] Start time: 2025-10-19 14:50:02 PDT
[nightly] Machine: smci355-ccs-aus-m15-21.cs-aus.dcgpu
[nightly] Working directory: /mnt/raid/michael/sglang-ci
[nightly] Script location: /mnt/raid/michael/sglang-ci/perf_nightly.sh
[nightly] Process ID: 3867382
[nightly] ==========================================

[nightly] Runtime Environment:
[nightly] User: michaezh | Groups: michaezh spack everyone... | Docker: /usr/bin/docker
[nightly] Testing Docker daemon access...
[nightly] Docker daemon accessible - proceeding...
[nightly] Teams webhook URL provided via command line - notifications enabled
[nightly] DeepSeek DP test enabled via command line
[nightly] DP test implies DP attention checks
[nightly] Custom model path provided: /data2/models/amd-DeepSeek-R1-MXFP4-Preview
[nightly] Hardware: mi35x, ROCM Version: rocm700
[nightly] Custom model name provided: DeepSeek-R1-MXFP4-Preview
[nightly] Model: deepseek, Mode(s): online
[nightly] Created process lock: /tmp/perf_nightly_deepseek.lock
[nightly] GPU is busy. Attempting to stop running Docker containers...
[nightly] Stopping running containers: 168333c7d17b
[nightly] Waiting 15s for GPU to become idle...
[nightly] WARN: GPU may still be busy, but proceeding as requested.
[nightly] Searching for non-SRT images for deepseek for the last 1 days...
[nightly] Searching for non-SRT mi35x image in 'rocm/sgl-dev' for date 20251019...
[nightly] Found candidate tag for day -0: v0.5.3.post3-rocm700-mi35x-20251019
[nightly] Found local image: rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251019
[nightly] Successfully obtained image for date 20251019: rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251019
[nightly] Found 1 valid image(s) to run benchmarks on:
[nightly]   - rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251019

[nightly] ==========================================
[nightly] Starting benchmarks for image: rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251019
[nightly] ==========================================
[nightly] Checking GPU status before starting benchmarks for rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251019...
[nightly] GPU is busy. Attempting to stop running Docker containers...
[nightly] Stopping running containers: cf831e7b4299
[nightly] Waiting 15s for GPU to become idle...
[nightly] WARN: GPU may still be busy, but proceeding as requested.
[nightly] Checking benchmark completion in: /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251019_DeepSeek-R1-MXFP4-Preview_FP8_online
[nightly] Found 0 completed benchmark runs
[nightly] INFO: Found 0/15 completed runs for rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251019 (online). Proceeding with benchmarks.
[nightly] Using Docker image: rocm/sgl-dev:v0.5.3.post3-rocm700-mi35x-20251019
[nightly] Container name: sgl-dev_v0.5.3.post3-rocm700-mi35x-20251019
[nightly] Reusing container sgl-dev_v0.5.3.post3-rocm700-mi35x-20251019
[nightly] === Starting benchmark execution ===
[nightly] === Starting nightly DEEPSEEK online benchmark ===
[nightly] Launching deepseek_perf_online_csv.sh inside sgl-dev_v0.5.3.post3-rocm700-mi35x-20251019
[nightly] Passing --model-name='DeepSeek-R1-MXFP4-Preview' to DeepSeek benchmark
[nightly] Adding --check-dp-attention flag for DeepSeek online benchmark
[nightly] Adding --enable-dp-test flag for DeepSeek online benchmark
[dp] DP test enabled - setting runs per concurrency to 1
✅ Parameter validation passed
[online] Script started at: 2025-10-19 14:50:35 PDT
Scanning existing logs to check if all benchmarks are already complete...
Checking GSM8K log status...
Missing: GSM8K log file (/mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251019_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_client_log_DeepSeek-R1-MXFP4-Preview_gsm8k.log)
Checking serving benchmark logs...
Missing: Concurrency 128, Run 1
Missing: Concurrency 64, Run 1
Missing: Concurrency 16, Run 1
Missing: Concurrency 4, Run 1
Missing: Concurrency 1, Run 1
Scan complete: 5 total runs needed, 5 missing/incomplete
❌ Missing 5 serving benchmark runs.
❌ GSM8K benchmark is missing, empty, or incomplete.
Server startup required.
Clearing previous logs...
Starting SGLang server for online GSM8K benchmark...
[DEBUG] Using Data Parallel attention settings with SGLANG_USE_AITER=1
[DEBUG] Enabling SGLANG_USE_ROCM700A for ROCm 700 image
Waiting for SGLang server (PID: 46) to start... (Max 15 minutes)
Server logs are being written to: /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251019_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_server.log
.........................
SGLang server started successfully after 125 seconds.
=== Online GSM8K Benchmark: TP=8, Questions=2000, Parallel=2000, Shots=5 ===
[progress] Total benchmark runs to execute: 10 (GSM8K: 5, Serving: 5) - DP test mode
[progress] [--------------------------------------------------] 0/10 (0%) 
Starting GSM8K Online Benchmark...
Running 5 test iterations...
Executing GSM8K test Run 1 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:16<5:55:05, 16.16s/it]  0%|          | 2/1319 [00:16<2:33:32,  6.99s/it]  0%|          | 3/1319 [00:17<1:32:59,  4.24s/it]  0%|          | 5/1319 [00:17<42:04,  1.92s/it]    2%|▏         | 20/1319 [00:18<06:00,  3.60it/s]  2%|▏         | 22/1319 [00:18<01:29, 14.43it/s]  2%|▏         | 22/1319 [00:18<01:29, 14.43it/s]  3%|▎         | 35/1319 [00:18<01:05, 19.65it/s]  4%|▍         | 50/1319 [00:18<00:44, 28.45it/s]  5%|▍         | 62/1319 [00:18<00:37, 33.89it/s]  6%|▌         | 81/1319 [00:18<00:24, 50.17it/s]  8%|▊         | 100/1319 [00:18<00:17, 68.32it/s]  9%|▊         | 115/1319 [00:18<00:15, 77.59it/s] 10%|▉         | 129/1319 [00:19<00:14, 80.19it/s] 11%|█         | 143/1319 [00:19<00:15, 77.60it/s] 11%|█         | 144/1319 [00:19<00:15, 77.35it/s] 12%|█▏        | 160/1319 [00:19<00:12, 92.40it/s] 14%|█▍        | 182/1319 [00:19<00:11, 100.86it/s] 15%|█▌        | 200/1319 [00:19<00:09, 116.68it/s] 17%|█▋        | 219/1319 [00:19<00:09, 111.57it/s] 18%|█▊        | 244/1319 [00:19<00:07, 140.71it/s] 19%|█▊        | 245/1319 [00:19<00:06, 168.21it/s] 20%|██        | 265/1319 [00:20<00:07, 139.82it/s] 21%|██▏       | 282/1319 [00:20<00:07, 144.74it/s] 23%|██▎       | 299/1319 [00:20<00:06, 149.53it/s] 24%|██▍       | 316/1319 [00:20<00:06, 153.82it/s] 25%|██▌       | 333/1319 [00:20<00:06, 156.54it/s] 27%|██▋       | 350/1319 [00:20<00:06, 159.42it/s] 27%|██▋       | 353/1319 [00:20<00:05, 164.14it/s] 28%|██▊       | 370/1319 [00:20<00:05, 164.65it/s] 29%|██▉       | 387/1319 [00:20<00:05, 165.69it/s] 32%|███▏      | 426/1319 [00:21<00:04, 194.42it/s] 34%|███▍      | 447/1319 [00:21<00:05, 168.56it/s] 36%|███▌      | 475/1319 [00:21<00:05, 167.73it/s] 39%|███▉      | 512/1319 [00:21<00:04, 181.88it/s] 41%|████▏     | 545/1319 [00:21<00:04, 180.62it/s] 44%|████▎     | 576/1319 [00:21<00:04, 176.28it/s] 46%|████▌     | 605/1319 [00:22<00:04, 171.66it/s] 47%|████▋     | 624/1319 [00:22<00:04, 151.71it/s] 50%|████▉     | 653/1319 [00:22<00:04, 154.97it/s] 52%|█████▏    | 688/1319 [00:22<00:03, 171.72it/s] 54%|█████▍    | 710/1319 [00:22<00:03, 159.54it/s] 56%|█████▌    | 735/1319 [00:22<00:03, 155.30it/s] 58%|█████▊    | 759/1319 [00:23<00:03, 150.60it/s] 60%|█████▉    | 788/1319 [00:23<00:03, 156.63it/s] 62%|██████▏   | 814/1319 [00:23<00:03, 156.46it/s] 63%|██████▎   | 836/1319 [00:23<00:03, 154.05it/s] 65%|██████▍   | 853/1319 [00:23<00:03, 142.93it/s] 67%|██████▋   | 880/1319 [00:23<00:02, 154.14it/s] 69%|██████▊   | 906/1319 [00:24<00:02, 165.86it/s] 71%|███████   | 936/1319 [00:24<00:02, 182.60it/s] 72%|███████▏  | 955/1319 [00:24<00:02, 170.44it/s] 74%|███████▍  | 978/1319 [00:24<00:01, 171.88it/s] 76%|███████▌  | 999/1319 [00:24<00:01, 167.77it/s] 76%|███████▌  | 1002/1319 [00:24<00:01, 166.88it/s] 78%|███████▊  | 1030/1319 [00:24<00:01, 181.08it/s] 80%|███████▉  | 1052/1319 [00:24<00:01, 180.39it/s] 81%|████████  | 1071/1319 [00:24<00:01, 175.00it/s] 81%|████████▏ | 1072/1319 [00:24<00:01, 173.32it/s] 83%|████████▎ | 1094/1319 [00:25<00:01, 177.57it/s] 84%|████████▍ | 1112/1319 [00:25<00:01, 146.97it/s] 86%|████████▌ | 1135/1319 [00:25<00:01, 156.82it/s] 87%|████████▋ | 1153/1319 [00:25<00:01, 153.02it/s] 89%|████████▉ | 1172/1319 [00:25<00:00, 151.79it/s] 90%|█████████ | 1191/1319 [00:25<00:00, 155.12it/s] 92%|█████████▏| 1207/1319 [00:25<00:00, 142.55it/s] 93%|█████████▎| 1222/1319 [00:25<00:00, 140.99it/s] 94%|█████████▍| 1237/1319 [00:26<00:00, 110.47it/s] 95%|█████████▍| 1250/1319 [00:26<00:00, 98.79it/s]  96%|█████████▌| 1261/1319 [00:26<00:00, 92.70it/s] 96%|█████████▋| 1271/1319 [00:26<00:00, 74.36it/s] 97%|█████████▋| 1280/1319 [00:26<00:00, 59.34it/s] 98%|█████████▊| 1287/1319 [00:27<00:00, 47.62it/s] 98%|█████████▊| 1293/1319 [00:27<00:00, 46.69it/s] 98%|█████████▊| 1299/1319 [00:27<00:00, 25.30it/s] 99%|█████████▉| 1303/1319 [00:28<00:00, 17.22it/s] 99%|█████████▉| 1306/1319 [00:32<00:03,  3.58it/s] 99%|█████████▉| 1309/1319 [00:33<00:02,  4.05it/s] 99%|█████████▉| 1310/1319 [00:33<00:01,  4.92it/s]100%|██████████| 1319/1319 [00:33<00:00, 39.57it/s]
Accuracy: 0.937
Invalid: 0.000
Latency: 38.853 s
Output throughput: 3388.607 token/s
Run 1 completed in 45 seconds
Run 1: Accuracy: 0.937
[progress] [=====---------------------------------------------] 1/10 (10%)  | GSM8K: Run 1
Executing GSM8K test Run 2 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:11<4:05:55, 11.20s/it]  0%|          | 2/1319 [00:11<1:49:52,  5.01s/it]  0%|          | 6/1319 [00:12<25:55,  1.18s/it]    2%|▏         | 20/1319 [00:12<05:31,  3.92it/s]  3%|▎         | 39/1319 [00:12<02:12,  9.65it/s]  4%|▍         | 52/1319 [00:12<01:29, 14.19it/s]  4%|▍         | 53/1319 [00:12<01:02, 20.11it/s]  6%|▌         | 74/1319 [00:12<00:37, 33.30it/s]  7%|▋         | 95/1319 [00:12<00:26, 45.61it/s]  8%|▊         | 108/1319 [00:12<00:22, 54.58it/s] 10%|▉         | 131/1319 [00:13<00:15, 77.76it/s] 12%|█▏        | 154/1319 [00:13<00:13, 89.45it/s] 13%|█▎        | 175/1319 [00:13<00:10, 109.45it/s] 15%|█▍        | 192/1319 [00:13<00:10, 103.06it/s] 15%|█▍        | 197/1319 [00:13<00:11, 99.91it/s]  15%|█▍        | 197/1319 [00:13<00:11, 99.91it/s] 16%|█▌        | 211/1319 [00:13<00:11, 92.53it/s] 17%|█▋        | 227/1319 [00:13<00:10, 105.08it/s] 18%|█▊        | 233/1319 [00:13<00:06, 160.33it/s] 18%|█▊        | 233/1319 [00:13<00:06, 160.33it/s] 18%|█▊        | 233/1319 [00:13<00:06, 160.33it/s] 18%|█▊        | 233/1319 [00:13<00:06, 160.33it/s] 19%|█▉        | 251/1319 [00:14<00:08, 128.84it/s] 19%|█▉        | 256/1319 [00:14<00:09, 108.62it/s] 19%|█▉        | 257/1319 [00:14<00:09, 108.62it/s] 20%|██        | 270/1319 [00:14<00:09, 111.89it/s] 21%|██▏       | 283/1319 [00:14<00:09, 114.98it/s] 22%|██▏       | 286/1319 [00:14<00:08, 126.13it/s] 22%|██▏       | 286/1319 [00:14<00:08, 126.13it/s] 23%|██▎       | 303/1319 [00:14<00:09, 102.30it/s] 23%|██▎       | 304/1319 [00:14<00:11, 91.71it/s]  24%|██▍       | 318/1319 [00:14<00:09, 100.99it/s] 25%|██▌       | 336/1319 [00:14<00:08, 118.98it/s] 27%|██▋       | 350/1319 [00:14<00:07, 123.08it/s] 29%|██▉       | 382/1319 [00:14<00:06, 148.71it/s] 32%|███▏      | 426/1319 [00:15<00:04, 188.39it/s] 36%|███▌      | 469/1319 [00:15<00:04, 211.78it/s] 37%|███▋      | 490/1319 [00:15<00:04, 176.74it/s] 39%|███▊      | 508/1319 [00:15<00:05, 151.09it/s] 41%|████      | 539/1319 [00:15<00:04, 156.31it/s] 43%|████▎     | 569/1319 [00:15<00:04, 159.91it/s] 45%|████▍     | 587/1319 [00:16<00:05, 141.88it/s] 46%|████▋     | 611/1319 [00:16<00:05, 141.34it/s] 48%|████▊     | 636/1319 [00:16<00:04, 144.25it/s] 48%|████▊     | 639/1319 [00:16<00:04, 152.45it/s] 49%|████▊     | 640/1319 [00:16<00:04, 152.45it/s] 50%|█████     | 660/1319 [00:16<00:04, 144.21it/s] 53%|█████▎    | 693/1319 [00:16<00:03, 158.51it/s] 55%|█████▌    | 727/1319 [00:16<00:03, 170.70it/s] 58%|█████▊    | 761/1319 [00:17<00:03, 180.41it/s] 60%|█████▉    | 790/1319 [00:17<00:02, 178.58it/s] 62%|██████▏   | 818/1319 [00:17<00:02, 173.76it/s] 63%|██████▎   | 837/1319 [00:17<00:02, 165.76it/s] 66%|██████▌   | 864/1319 [00:17<00:02, 181.18it/s] 68%|██████▊   | 893/1319 [00:17<00:02, 192.43it/s] 70%|███████   | 925/1319 [00:17<00:01, 206.90it/s] 72%|███████▏  | 948/1319 [00:18<00:01, 197.01it/s] 74%|███████▎  | 972/1319 [00:18<00:01, 192.24it/s] 76%|███████▌  | 997/1319 [00:18<00:01, 191.02it/s] 77%|███████▋  | 1017/1319 [00:18<00:01, 179.48it/s] 79%|███████▉  | 1043/1319 [00:18<00:01, 185.30it/s] 81%|████████  | 1064/1319 [00:18<00:01, 181.47it/s] 82%|████████▏ | 1083/1319 [00:18<00:01, 159.98it/s] 83%|████████▎ | 1100/1319 [00:19<00:01, 156.33it/s] 85%|████████▍ | 1116/1319 [00:19<00:01, 151.44it/s] 86%|████████▌ | 1132/1319 [00:19<00:01, 151.50it/s] 88%|████████▊ | 1155/1319 [00:19<00:01, 162.74it/s] 89%|████████▉ | 1172/1319 [00:19<00:00, 152.85it/s] 90%|█████████ | 1188/1319 [00:19<00:00, 149.29it/s] 91%|█████████ | 1203/1319 [00:19<00:00, 137.77it/s] 92%|█████████▏| 1219/1319 [00:19<00:00, 140.27it/s] 94%|█████████▎| 1234/1319 [00:19<00:00, 140.70it/s] 95%|█████████▍| 1249/1319 [00:20<00:00, 121.50it/s] 96%|█████████▌| 1262/1319 [00:20<00:00, 94.47it/s]  97%|█████████▋| 1273/1319 [00:20<00:00, 87.42it/s] 97%|█████████▋| 1283/1319 [00:20<00:00, 71.79it/s] 98%|█████████▊| 1292/1319 [00:20<00:00, 59.65it/s] 98%|█████████▊| 1299/1319 [00:21<00:00, 44.26it/s] 99%|█████████▉| 1305/1319 [00:21<00:00, 31.25it/s] 99%|█████████▉| 1310/1319 [00:23<00:00,  9.89it/s]100%|█████████▉| 1314/1319 [00:25<00:00,  5.66it/s]100%|██████████| 1319/1319 [00:25<00:00, 51.13it/s]
Accuracy: 0.939
Invalid: 0.000
Latency: 25.971 s
Output throughput: 4999.377 token/s
Run 2 completed in 32 seconds
Run 2: Accuracy: 0.939
[progress] [==========----------------------------------------] 2/10 (20%)  | GSM8K: Run 2
Executing GSM8K test Run 3 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:11<4:01:40, 11.00s/it]  0%|          | 2/1319 [00:11<1:45:37,  4.81s/it]  0%|          | 3/1319 [00:11<59:16,  2.70s/it]    0%|          | 4/1319 [00:11<38:20,  1.75s/it]  0%|          | 6/1319 [00:12<19:06,  1.15it/s]  1%|          | 7/1319 [00:12<09:41,  2.26it/s]  1%|          | 9/1319 [00:12<07:07,  3.06it/s]  2%|▏         | 26/1319 [00:12<01:34, 13.65it/s]  3%|▎         | 44/1319 [00:12<00:49, 25.68it/s]  5%|▌         | 70/1319 [00:12<00:25, 49.23it/s]  5%|▌         | 72/1319 [00:12<00:16, 76.89it/s]  7%|▋         | 89/1319 [00:13<00:15, 79.60it/s]  8%|▊         | 104/1319 [00:13<00:15, 78.92it/s] 10%|▉         | 128/1319 [00:13<00:11, 104.29it/s] 11%|█         | 148/1319 [00:13<00:11, 105.73it/s] 13%|█▎        | 169/1319 [00:13<00:10, 106.97it/s] 14%|█▍        | 183/1319 [00:13<00:11, 96.49it/s]  15%|█▌        | 201/1319 [00:13<00:09, 111.96it/s] 16%|█▋        | 217/1319 [00:14<00:10, 101.98it/s] 17%|█▋        | 229/1319 [00:14<00:10, 105.01it/s] 18%|█▊        | 243/1319 [00:14<00:09, 111.96it/s] 19%|█▉        | 256/1319 [00:14<00:09, 114.83it/s] 20%|█▉        | 260/1319 [00:14<00:08, 125.49it/s] 20%|█▉        | 263/1319 [00:14<00:08, 125.49it/s] 21%|██        | 277/1319 [00:14<00:08, 128.73it/s] 23%|██▎       | 297/1319 [00:14<00:06, 147.84it/s] 23%|██▎       | 298/1319 [00:14<00:06, 164.57it/s] 24%|██▍       | 315/1319 [00:14<00:06, 164.73it/s] 25%|██▌       | 333/1319 [00:14<00:05, 167.53it/s] 27%|██▋       | 350/1319 [00:15<00:05, 166.46it/s] 28%|██▊       | 367/1319 [00:15<00:05, 166.48it/s] 31%|███       | 405/1319 [00:15<00:04, 192.28it/s] 34%|███▎      | 442/1319 [00:15<00:04, 203.85it/s] 35%|███▌      | 467/1319 [00:15<00:04, 184.65it/s] 38%|███▊      | 500/1319 [00:15<00:04, 188.16it/s] 40%|████      | 529/1319 [00:15<00:04, 179.87it/s] 40%|████      | 530/1319 [00:15<00:04, 176.27it/s] 43%|████▎     | 561/1319 [00:16<00:04, 173.31it/s] 44%|████▍     | 581/1319 [00:16<00:04, 152.50it/s] 46%|████▌     | 601/1319 [00:16<00:05, 138.56it/s] 47%|████▋     | 621/1319 [00:16<00:05, 128.76it/s] 50%|████▉     | 653/1319 [00:16<00:04, 143.19it/s] 52%|█████▏    | 687/1319 [00:17<00:04, 156.64it/s] 52%|█████▏    | 691/1319 [00:17<00:03, 167.65it/s] 54%|█████▍    | 711/1319 [00:17<00:03, 153.30it/s] 56%|█████▌    | 738/1319 [00:17<00:03, 156.94it/s] 58%|█████▊    | 761/1319 [00:17<00:03, 149.69it/s] 60%|█████▉    | 787/1319 [00:17<00:03, 149.80it/s] 60%|█████▉    | 789/1319 [00:17<00:03, 151.54it/s] 61%|██████    | 805/1319 [00:17<00:03, 148.86it/s] 62%|██████▏   | 820/1319 [00:17<00:03, 136.12it/s] 64%|██████▎   | 838/1319 [00:18<00:03, 128.02it/s] 65%|██████▍   | 852/1319 [00:18<00:04, 114.14it/s] 66%|██████▋   | 874/1319 [00:18<00:03, 123.77it/s] 68%|██████▊   | 899/1319 [00:18<00:03, 136.82it/s] 69%|██████▉   | 914/1319 [00:18<00:03, 126.19it/s] 70%|███████   | 927/1319 [00:18<00:03, 114.65it/s] 70%|███████   | 928/1319 [00:18<00:03, 108.40it/s] 71%|███████▏  | 941/1319 [00:19<00:03, 102.76it/s] 74%|███████▍  | 973/1319 [00:19<00:02, 141.20it/s] 76%|███████▌  | 1000/1319 [00:19<00:02, 158.99it/s] 76%|███████▌  | 1003/1319 [00:19<00:01, 187.14it/s] 76%|███████▌  | 1003/1319 [00:19<00:01, 187.14it/s] 77%|███████▋  | 1022/1319 [00:19<00:01, 174.08it/s] 78%|███████▊  | 1023/1319 [00:19<00:01, 166.97it/s] 79%|███████▉  | 1040/1319 [00:19<00:01, 141.33it/s] 79%|███████▉  | 1044/1319 [00:19<00:02, 120.85it/s] 79%|███████▉  | 1045/1319 [00:19<00:02, 120.85it/s] 81%|████████  | 1069/1319 [00:19<00:01, 137.25it/s] 82%|████████▏ | 1086/1319 [00:19<00:01, 135.33it/s] 84%|████████▎ | 1102/1319 [00:20<00:01, 131.50it/s] 85%|████████▍ | 1118/1319 [00:20<00:01, 132.94it/s] 86%|████████▌ | 1133/1319 [00:20<00:01, 131.00it/s] 87%|████████▋ | 1147/1319 [00:20<00:01, 130.73it/s] 88%|████████▊ | 1161/1319 [00:20<00:01, 132.71it/s] 89%|████████▉ | 1175/1319 [00:20<00:01, 129.34it/s] 90%|█████████ | 1193/1319 [00:20<00:00, 139.40it/s] 92%|█████████▏| 1208/1319 [00:20<00:00, 138.57it/s] 93%|█████████▎| 1222/1319 [00:21<00:00, 110.97it/s] 94%|█████████▎| 1234/1319 [00:21<00:01, 84.94it/s]  94%|█████████▎| 1235/1319 [00:21<00:01, 73.33it/s] 94%|█████████▍| 1245/1319 [00:21<00:00, 75.51it/s] 95%|█████████▌| 1254/1319 [00:21<00:00, 72.13it/s] 96%|█████████▌| 1262/1319 [00:21<00:00, 70.80it/s] 96%|█████████▋| 1270/1319 [00:21<00:00, 61.77it/s] 97%|█████████▋| 1277/1319 [00:21<00:00, 62.23it/s] 97%|█████████▋| 1284/1319 [00:22<00:00, 44.64it/s] 98%|█████████▊| 1290/1319 [00:22<00:00, 32.90it/s] 98%|█████████▊| 1295/1319 [00:22<00:00, 32.67it/s] 98%|█████████▊| 1299/1319 [00:22<00:00, 30.20it/s] 99%|█████████▉| 1303/1319 [00:23<00:00, 24.20it/s] 99%|█████████▉| 1307/1319 [00:23<00:00, 18.50it/s] 99%|█████████▉| 1310/1319 [00:25<00:01,  6.85it/s] 99%|█████████▉| 1312/1319 [00:25<00:01,  6.47it/s]100%|█████████▉| 1314/1319 [00:26<00:01,  3.79it/s]100%|█████████▉| 1315/1319 [00:26<00:01,  3.05it/s]100%|██████████| 1319/1319 [00:26<00:00, 48.95it/s]
Accuracy: 0.939
Invalid: 0.000
Latency: 27.050 s
Output throughput: 4901.415 token/s
Run 3 completed in 33 seconds
Run 3: Accuracy: 0.939
[progress] [===============-----------------------------------] 3/10 (30%)  | GSM8K: Run 3
Executing GSM8K test Run 4 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:11<4:14:01, 11.56s/it]  0%|          | 2/1319 [00:12<1:54:27,  5.21s/it]  0%|          | 3/1319 [00:12<1:05:01,  2.96s/it]  0%|          | 6/1319 [00:12<22:52,  1.05s/it]    1%|          | 15/1319 [00:12<06:05,  3.56it/s]  2%|▏         | 24/1319 [00:13<03:10,  6.79it/s]  2%|▏         | 28/1319 [00:13<00:54, 23.48it/s]  2%|▏         | 29/1319 [00:13<00:54, 23.48it/s]  2%|▏         | 29/1319 [00:13<00:54, 23.48it/s]  3%|▎         | 45/1319 [00:13<00:37, 33.98it/s]  5%|▍         | 62/1319 [00:13<00:25, 49.49it/s]  6%|▌         | 74/1319 [00:13<00:23, 52.92it/s]  6%|▌         | 75/1319 [00:13<00:21, 57.05it/s]  8%|▊         | 99/1319 [00:13<00:14, 86.38it/s]  8%|▊         | 112/1319 [00:13<00:12, 92.89it/s] 11%|█         | 143/1319 [00:13<00:09, 118.22it/s] 12%|█▏        | 164/1319 [00:14<00:08, 136.78it/s] 13%|█▎        | 165/1319 [00:14<00:07, 155.35it/s] 14%|█▍        | 183/1319 [00:14<00:08, 132.49it/s] 15%|█▌        | 199/1319 [00:14<00:09, 116.12it/s] 16%|█▋        | 215/1319 [00:14<00:10, 105.26it/s] 18%|█▊        | 239/1319 [00:14<00:09, 110.40it/s] 19%|█▉        | 251/1319 [00:14<00:09, 111.25it/s] 20%|█▉        | 263/1319 [00:15<00:09, 112.18it/s] 21%|██▏       | 283/1319 [00:15<00:07, 132.13it/s] 23%|██▎       | 298/1319 [00:15<00:07, 135.41it/s] 24%|██▎       | 313/1319 [00:15<00:07, 137.95it/s] 25%|██▌       | 336/1319 [00:15<00:06, 161.54it/s] 27%|██▋       | 353/1319 [00:15<00:05, 162.91it/s] 29%|██▉       | 381/1319 [00:15<00:05, 165.07it/s] 32%|███▏      | 419/1319 [00:15<00:04, 188.42it/s] 32%|███▏      | 420/1319 [00:15<00:04, 204.52it/s] 34%|███▍      | 448/1319 [00:16<00:04, 192.09it/s] 36%|███▌      | 471/1319 [00:16<00:04, 174.22it/s] 38%|███▊      | 501/1319 [00:16<00:04, 172.32it/s] 40%|████      | 529/1319 [00:16<00:04, 165.73it/s] 43%|████▎     | 566/1319 [00:16<00:04, 178.36it/s] 45%|████▌     | 594/1319 [00:16<00:04, 171.65it/s] 47%|████▋     | 618/1319 [00:17<00:04, 164.34it/s] 49%|████▉     | 647/1319 [00:17<00:04, 167.87it/s] 51%|█████▏    | 676/1319 [00:17<00:03, 170.87it/s] 53%|█████▎    | 699/1319 [00:17<00:03, 159.08it/s] 55%|█████▌    | 729/1319 [00:17<00:03, 163.38it/s] 56%|█████▌    | 733/1319 [00:17<00:03, 178.01it/s] 56%|█████▌    | 735/1319 [00:17<00:03, 178.01it/s] 56%|█████▌    | 738/1319 [00:17<00:03, 178.01it/s] 57%|█████▋    | 757/1319 [00:17<00:03, 157.67it/s] 59%|█████▉    | 781/1319 [00:18<00:03, 154.32it/s] 61%|██████    | 807/1319 [00:18<00:03, 154.91it/s] 63%|██████▎   | 832/1319 [00:18<00:03, 153.66it/s] 64%|██████▍   | 848/1319 [00:18<00:03, 140.61it/s] 66%|██████▋   | 874/1319 [00:18<00:02, 150.71it/s] 68%|██████▊   | 898/1319 [00:18<00:02, 159.55it/s] 71%|███████   | 930/1319 [00:19<00:02, 182.54it/s] 73%|███████▎  | 957/1319 [00:19<00:01, 188.31it/s] 75%|███████▍  | 983/1319 [00:19<00:01, 190.62it/s] 76%|███████▌  | 1004/1319 [00:19<00:01, 181.40it/s] 78%|███████▊  | 1029/1319 [00:19<00:01, 183.76it/s] 80%|███████▉  | 1051/1319 [00:19<00:01, 178.91it/s] 81%|████████  | 1070/1319 [00:19<00:01, 170.91it/s] 83%|████████▎ | 1090/1319 [00:19<00:01, 170.56it/s] 84%|████████▍ | 1108/1319 [00:20<00:01, 151.47it/s] 86%|████████▌ | 1133/1319 [00:20<00:01, 164.49it/s] 87%|████████▋ | 1150/1319 [00:20<00:01, 155.60it/s] 88%|████████▊ | 1166/1319 [00:20<00:01, 147.65it/s] 90%|████████▉ | 1184/1319 [00:20<00:00, 146.43it/s] 91%|█████████ | 1199/1319 [00:20<00:01, 107.08it/s] 92%|█████████▏| 1212/1319 [00:20<00:01, 97.37it/s]  93%|█████████▎| 1223/1319 [00:21<00:01, 93.27it/s] 94%|█████████▍| 1237/1319 [00:21<00:00, 101.35it/s] 95%|█████████▍| 1248/1319 [00:21<00:00, 89.17it/s]  95%|█████████▌| 1258/1319 [00:21<00:00, 79.97it/s] 96%|█████████▌| 1267/1319 [00:21<00:00, 62.37it/s] 97%|█████████▋| 1275/1319 [00:21<00:00, 64.49it/s] 97%|█████████▋| 1283/1319 [00:22<00:00, 59.33it/s] 98%|█████████▊| 1290/1319 [00:22<00:00, 51.07it/s] 98%|█████████▊| 1296/1319 [00:22<00:00, 39.27it/s] 99%|█████████▊| 1301/1319 [00:22<00:00, 32.71it/s] 99%|█████████▉| 1305/1319 [00:24<00:01, 10.14it/s] 99%|█████████▉| 1308/1319 [00:24<00:01, 10.32it/s] 99%|█████████▉| 1311/1319 [00:26<00:01,  4.93it/s]100%|█████████▉| 1313/1319 [00:27<00:01,  4.42it/s]100%|██████████| 1319/1319 [00:27<00:00, 48.38it/s]
Accuracy: 0.947
Invalid: 0.000
Latency: 27.421 s
Output throughput: 4811.338 token/s
Run 4 completed in 33 seconds
Run 4: Accuracy: 0.947
[progress] [====================------------------------------] 4/10 (40%)  | GSM8K: Run 4
Executing GSM8K test Run 5 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:10<3:52:12, 10.57s/it]  0%|          | 2/1319 [00:11<1:45:27,  4.80s/it]  0%|          | 3/1319 [00:11<59:11,  2.70s/it]    0%|          | 5/1319 [00:11<26:49,  1.23s/it]  1%|          | 11/1319 [00:11<08:03,  2.71it/s]  1%|          | 13/1319 [00:11<02:10, 10.00it/s]  1%|          | 13/1319 [00:11<02:10, 10.00it/s]  2%|▏         | 23/1319 [00:12<01:21, 15.87it/s]  2%|▏         | 24/1319 [00:12<00:56, 22.77it/s]  3%|▎         | 40/1319 [00:12<00:34, 36.75it/s]  4%|▍         | 57/1319 [00:12<00:25, 49.06it/s]  6%|▌         | 77/1319 [00:12<00:17, 71.21it/s]  6%|▌         | 80/1319 [00:12<00:08, 143.13it/s]  6%|▌         | 80/1319 [00:12<00:08, 143.13it/s]  6%|▌         | 80/1319 [00:12<00:08, 143.13it/s]  8%|▊         | 99/1319 [00:12<00:09, 126.19it/s]  9%|▊         | 115/1319 [00:12<00:10, 113.17it/s] 11%|█         | 142/1319 [00:12<00:08, 143.87it/s] 12%|█▏        | 160/1319 [00:12<00:07, 151.03it/s] 13%|█▎        | 178/1319 [00:13<00:08, 130.11it/s] 14%|█▎        | 181/1319 [00:13<00:09, 115.16it/s] 14%|█▍        | 183/1319 [00:13<00:09, 115.16it/s] 15%|█▍        | 197/1319 [00:13<00:11, 99.71it/s]  15%|█▌        | 200/1319 [00:13<00:12, 87.09it/s] 15%|█▌        | 200/1319 [00:13<00:12, 87.09it/s] 16%|█▌        | 210/1319 [00:13<00:14, 76.79it/s] 18%|█▊        | 235/1319 [00:13<00:11, 93.24it/s] 20%|██        | 265/1319 [00:13<00:08, 131.67it/s] 21%|██▏       | 281/1319 [00:13<00:07, 136.93it/s] 21%|██▏       | 282/1319 [00:13<00:07, 143.67it/s] 23%|██▎       | 298/1319 [00:14<00:08, 117.66it/s] 24%|██▍       | 315/1319 [00:14<00:07, 128.73it/s] 25%|██▌       | 330/1319 [00:14<00:07, 132.87it/s] 26%|██▋       | 348/1319 [00:14<00:06, 143.59it/s] 29%|██▉       | 381/1319 [00:14<00:05, 164.26it/s] 31%|███       | 412/1319 [00:14<00:05, 172.05it/s] 34%|███▎      | 443/1319 [00:14<00:04, 176.09it/s] 35%|███▌      | 464/1319 [00:15<00:05, 159.34it/s] 38%|███▊      | 498/1319 [00:15<00:04, 169.49it/s] 40%|████      | 530/1319 [00:15<00:04, 170.81it/s] 42%|████▏     | 553/1319 [00:15<00:04, 182.53it/s] 42%|████▏     | 555/1319 [00:15<00:03, 195.01it/s] 44%|████▎     | 576/1319 [00:15<00:04, 166.71it/s] 45%|████▌     | 594/1319 [00:15<00:04, 145.56it/s] 48%|████▊     | 629/1319 [00:16<00:04, 162.23it/s] 50%|████▉     | 654/1319 [00:16<00:04, 159.28it/s] 51%|█████▏    | 676/1319 [00:16<00:04, 151.54it/s] 53%|█████▎    | 704/1319 [00:16<00:03, 155.16it/s] 55%|█████▌    | 726/1319 [00:16<00:04, 146.85it/s] 57%|█████▋    | 758/1319 [00:16<00:03, 158.96it/s] 59%|█████▉    | 780/1319 [00:17<00:03, 150.82it/s] 60%|██████    | 796/1319 [00:17<00:03, 134.32it/s] 60%|██████    | 797/1319 [00:17<00:04, 124.48it/s] 63%|██████▎   | 829/1319 [00:17<00:03, 147.40it/s] 65%|██████▍   | 851/1319 [00:17<00:03, 147.40it/s] 65%|██████▍   | 852/1319 [00:17<00:03, 149.21it/s] 66%|██████▌   | 871/1319 [00:17<00:03, 143.64it/s] 68%|██████▊   | 900/1319 [00:17<00:02, 164.38it/s] 70%|██████▉   | 922/1319 [00:18<00:02, 165.57it/s] 71%|███████▏  | 943/1319 [00:18<00:02, 163.93it/s] 74%|███████▍  | 977/1319 [00:18<00:01, 190.62it/s] 76%|███████▌  | 1001/1319 [00:18<00:01, 187.93it/s] 78%|███████▊  | 1023/1319 [00:18<00:01, 181.36it/s] 79%|███████▉  | 1044/1319 [00:18<00:01, 175.63it/s] 81%|████████  | 1065/1319 [00:18<00:01, 174.42it/s] 82%|████████▏ | 1083/1319 [00:18<00:01, 166.15it/s] 83%|████████▎ | 1100/1319 [00:19<00:01, 161.07it/s] 85%|████████▍ | 1118/1319 [00:19<00:01, 165.49it/s] 87%|████████▋ | 1143/1319 [00:19<00:00, 178.46it/s] 88%|████████▊ | 1161/1319 [00:19<00:00, 173.80it/s] 89%|████████▉ | 1179/1319 [00:19<00:00, 170.45it/s] 91%|█████████ | 1197/1319 [00:19<00:00, 138.12it/s] 92%|█████████▏| 1212/1319 [00:19<00:00, 115.92it/s] 93%|█████████▎| 1225/1319 [00:19<00:00, 112.63it/s] 94%|█████████▍| 1237/1319 [00:20<00:00, 109.32it/s] 95%|█████████▍| 1250/1319 [00:20<00:00, 109.23it/s] 96%|█████████▌| 1262/1319 [00:20<00:00, 108.71it/s] 97%|█████████▋| 1274/1319 [00:20<00:00, 103.46it/s] 97%|█████████▋| 1285/1319 [00:20<00:00, 80.83it/s]  98%|█████████▊| 1294/1319 [00:20<00:00, 63.73it/s] 99%|█████████▊| 1302/1319 [00:21<00:00, 39.10it/s] 99%|█████████▉| 1308/1319 [00:25<00:01,  6.21it/s] 99%|█████████▉| 1312/1319 [00:25<00:00,  7.13it/s]100%|██████████| 1319/1319 [00:25<00:00, 51.06it/s]
Accuracy: 0.942
Invalid: 0.000
Latency: 26.020 s
Output throughput: 5094.542 token/s
Run 5 completed in 32 seconds
Run 5: Accuracy: 0.942
[progress] [=========================-------------------------] 5/10 (50%)  | GSM8K: Run 5
GSM8K test completed in 175 seconds
Average Accuracy over 5 runs: 0.941
Average accuracy meets threshold (0.93).
✅ GSM8K benchmark completed successfully.
GSM8K log saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251019_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_client_log_DeepSeek-R1-MXFP4-Preview_gsm8k.log
Server log saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251019_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_server.log
Starting serving benchmark tests with different concurrency levels...
[online] Structured CSV initialized at /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251019_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/v0.5.3.post3-rocm700-mi35x-20251019_DeepSeek-R1-MXFP4-Preview_FP8_serving_dp_attention.csv
Processing concurrency 128 with 1 runs...
Running serving benchmark with concurrency 128 (Run 1) - 500 prompts...
Concurrency 128, Run 1 completed: 500 requests, (tok/s): tok/s output throughput, 37906.96ms E2E latency (168s)
[progress] [==============================--------------------] 6/10 (60%)  | Serving: C128 R1
✅ Best results for concurrency 128: E2E=37906.96ms, TTFT=12864.68ms, ITL=26.55ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 128: E2E=37906.96ms, TTFT=12864.68ms, ITL=26.55ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 128
Sleeping 3 seconds before next concurrency level...
Processing concurrency 64 with 1 runs...
Running serving benchmark with concurrency 64 (Run 1) - 500 prompts...
Concurrency 64, Run 1 completed: 500 requests, (tok/s): tok/s output throughput, 25620.75ms E2E latency (223s)
[progress] [===================================---------------] 7/10 (70%)  | Serving: C64 R1
✅ Best results for concurrency 64: E2E=25620.75ms, TTFT=6800.53ms, ITL=22.11ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 64: E2E=25620.75ms, TTFT=6800.53ms, ITL=22.11ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 64
Sleeping 3 seconds before next concurrency level...
Processing concurrency 16 with 1 runs...
Running serving benchmark with concurrency 16 (Run 1) - 128 prompts...
Concurrency 16, Run 1 completed: 128 requests, (tok/s): tok/s output throughput, 16496.08ms E2E latency (142s)
[progress] [========================================----------] 8/10 (80%)  | Serving: C16 R1
✅ Best results for concurrency 16: E2E=16496.08ms, TTFT=2869.78ms, ITL=16.34ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 16: E2E=16496.08ms, TTFT=2869.78ms, ITL=16.34ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 16
Sleeping 3 seconds before next concurrency level...
Processing concurrency 4 with 1 runs...
Running serving benchmark with concurrency 4 (Run 1) - 128 prompts...
Concurrency 4, Run 1 completed: 128 requests, (tok/s): tok/s output throughput, 12758.37ms E2E latency (420s)
[progress] [=============================================-----] 9/10 (90%)  | Serving: C4 R1
✅ Best results for concurrency 4: E2E=12758.37ms, TTFT=987.41ms, ITL=14.72ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 4: E2E=12758.37ms, TTFT=987.41ms, ITL=14.72ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 4
Sleeping 3 seconds before next concurrency level...
Processing concurrency 1 with 1 runs...
Running serving benchmark with concurrency 1 (Run 1) - 128 prompts...
[nightly] === Online benchmark dispatched for DEEPSEEK; check logs in sgl-dev_v0.5.3.post3-rocm700-mi35x-20251019 ===
[nightly] === Starting post-processing (CSV processing, plot generation, Teams notifications) ===
[nightly] Processing online CSV data and generating plots... Logs will be saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post3-rocm700-mi35x-20251019_DeepSeek-R1-MXFP4-Preview_FP8_online/process_and_generate_online_plots.log
[nightly] Using plot date from image tag: 20251019
OCI runtime exec failed: exec failed: unable to start container process: error executing setns process: exit status 1: unknown
[nightly] Cleaning up process lock...
