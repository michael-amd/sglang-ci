[nightly] ==========================================
[nightly] SGL Nightly Benchmark Started
[nightly] ==========================================
[nightly] Command: scripts/perf_nightly.sh --model=deepseek --model-path=/mnt/raid/models/huggingface/deepseek-ai/DeepSeek-V3-0324 --mode=online --hardware=mi30x --teams-webhook-url=https://default3dd8961fe4884e608e11a82d994e18.3d.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/5b63cac7474049f7a780db5486e3a5c6/triggers/manual/paths/invoke?api-version=1&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=5npWudEjINETmq67Bx35skofwckhvg92Io38Ayll5Ns
[nightly] Start time: 2025-11-12 17:48:45 PST
[nightly] Machine: dell300x-pla-t10-23
[nightly] Working directory: /mnt/raid/michael/sglang-ci
[nightly] Script location: /mnt/raid/michael/sglang-ci/scripts/perf_nightly.sh
[nightly] Process ID: 847493
[nightly] ==========================================

[nightly] Runtime Environment:
[nightly] User: amd | Groups: amd video users... | Docker: /usr/bin/docker
[nightly] Testing Docker daemon access...
[nightly] Docker daemon accessible - proceeding...
[nightly] Teams webhook URL provided via command line - notifications enabled
[nightly] Custom model path provided: /mnt/raid/models/huggingface/deepseek-ai/DeepSeek-V3-0324
[nightly] Hardware: mi30x, ROCM Version: rocm700
[nightly] Model: deepseek, Mode(s): online
[nightly] Created process lock: /tmp/perf_nightly_deepseek.lock
[nightly] GPU is busy. Attempting to stop running Docker containers...
[nightly] Stopping running containers: 2674e9569c46
[nightly] Waiting 15s for GPU to become idle...
[nightly] WARN: GPU may still be busy, but proceeding as requested.
[nightly] Searching for non-SRT images for deepseek for the last 1 days...
[nightly] Searching for non-SRT mi30x image (rocm700) in 'rocm/sgl-dev' for date 20251112...
[nightly] Found candidate tag for day -0: v0.5.5.post2-rocm700-mi30x-20251112
[nightly] Found local image: rocm/sgl-dev:v0.5.5.post2-rocm700-mi30x-20251112
[nightly] Successfully obtained image for date 20251112: rocm/sgl-dev:v0.5.5.post2-rocm700-mi30x-20251112
[nightly] Found 1 valid image(s) to run benchmarks on:
[nightly]   - rocm/sgl-dev:v0.5.5.post2-rocm700-mi30x-20251112

[nightly] ==========================================
[nightly] Starting benchmarks for image: rocm/sgl-dev:v0.5.5.post2-rocm700-mi30x-20251112
[nightly] ==========================================
[nightly] Checking GPU status before starting benchmarks for rocm/sgl-dev:v0.5.5.post2-rocm700-mi30x-20251112...
[nightly] GPU is busy. Attempting to stop running Docker containers...
[nightly] Stopping running containers: 8bcb4431ac56
[nightly] Waiting 15s for GPU to become idle...
[nightly] WARN: GPU may still be busy, but proceeding as requested.
[nightly] Checking benchmark completion in: /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.5.post2-rocm700-mi30x-20251112_DeepSeek-V3-0324_FP8_online
[nightly] Found 0 completed benchmark runs
[nightly] INFO: Found 0/15 completed runs for rocm/sgl-dev:v0.5.5.post2-rocm700-mi30x-20251112 (online). Proceeding with benchmarks.
[nightly] Using Docker image: rocm/sgl-dev:v0.5.5.post2-rocm700-mi30x-20251112
[nightly] Container name: sgl-dev_v0.5.5.post2-rocm700-mi30x-20251112
[nightly] Reusing container sgl-dev_v0.5.5.post2-rocm700-mi30x-20251112
[nightly] === Starting benchmark execution ===
[nightly] === Starting nightly DEEPSEEK online benchmark ===
[nightly] Launching deepseek_perf_online_csv.sh inside sgl-dev_v0.5.5.post2-rocm700-mi30x-20251112
[nightly] Passing --model-name='DeepSeek-V3-0324' to DeepSeek benchmark
‚úÖ Parameter validation passed
[online] Script started at: 2025-11-12 17:49:17 PST
Scanning existing logs to check if all benchmarks are already complete...
Checking GSM8K log status...
Missing: GSM8K log file (/mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.5.post2-rocm700-mi30x-20251112_DeepSeek-V3-0324_FP8_online/sglang_client_log_DeepSeek-V3-0324_gsm8k.log)
Checking serving benchmark logs...
Missing: Concurrency 128, Run 1
Missing: Concurrency 64, Run 1
Missing: Concurrency 16, Run 1
Missing: Concurrency 4, Run 1
Missing: Concurrency 1, Run 1
Scan complete: 5 total runs needed, 5 missing/incomplete
‚ùå Missing 5 serving benchmark runs.
‚ùå GSM8K benchmark is missing, empty, or incomplete.
Server startup required.
Clearing previous logs...
Starting SGLang server for online GSM8K benchmark...
[DEBUG] Using standard settings with environment variable: SGLANG_USE_AITER
Waiting for SGLang server (PID: 47) to start... (Max 15 minutes)
Server logs are being written to: /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.5.post2-rocm700-mi30x-20251112_DeepSeek-V3-0324_FP8_online/sglang_server.log
............................
SGLang server started successfully after 140 seconds.
=== Online GSM8K Benchmark: TP=8, Questions=2000, Parallel=2000, Shots=5 ===
[progress] Total benchmark runs to execute: 10 (GSM8K: 5, Serving: 5) - standard mode
[progress] [--------------------------------------------------] 0/10 (0%) 
Starting GSM8K Online Benchmark...
Running 5 test iterations...
Executing GSM8K test Run 1 ...
/mnt/raid/michael/sglang-ci/scripts/deepseek_perf_online_csv.sh: line 874:    47 Killed                  env ${aiter_env_var}=1 python3 -m sglang.launch_server --model-path "${MODEL}" --tp-size "${TP}" --port "$GSM8K_PORT" --trust-remote-code --mem-fraction-static "$SERVER_MEM_FRACTION" --max-running-requests "$SERVER_MAX_REQUESTS" ${torch_compile_flag} > "$SERVER_LOG_FILE" 2>&1
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:09<3:21:04,  9.15s/it]  0%|          | 2/1319 [00:09<1:24:14,  3.84s/it]  0%|          | 3/1319 [00:09<49:22,  2.25s/it]    0%|          | 4/1319 [00:10<36:48,  1.68s/it]  0%|          | 6/1319 [00:10<18:24,  1.19it/s]  1%|          | 10/1319 [00:10<07:41,  2.84it/s]  1%|          | 14/1319 [00:11<04:54,  4.43it/s]  1%|‚ñè         | 19/1319 [00:11<03:16,  6.60it/s]  2%|‚ñè         | 26/1319 [00:11<01:44, 12.35it/s]  2%|‚ñè         | 28/1319 [00:11<01:44, 12.35it/s]  2%|‚ñè         | 30/1319 [00:11<01:59, 10.82it/s]  3%|‚ñé         | 35/1319 [00:12<01:46, 12.02it/s]  3%|‚ñé         | 40/1319 [00:12<01:31, 14.00it/s]  3%|‚ñé         | 42/1319 [00:12<01:39, 12.78it/s]  4%|‚ñç         | 53/1319 [00:12<01:03, 19.85it/s]  5%|‚ñç         | 61/1319 [00:13<00:57, 21.96it/s]  5%|‚ñç         | 65/1319 [00:13<00:37, 33.21it/s]  5%|‚ñç         | 65/1319 [00:13<00:37, 33.21it/s]  5%|‚ñç         | 65/1319 [00:13<00:37, 33.21it/s]  5%|‚ñç         | 65/1319 [00:13<00:37, 33.21it/s]  5%|‚ñå         | 69/1319 [00:13<00:39, 31.29it/s]  6%|‚ñå         | 74/1319 [00:13<00:43, 28.71it/s]  6%|‚ñå         | 79/1319 [00:13<00:46, 26.70it/s]  7%|‚ñã         | 90/1319 [00:13<00:37, 32.71it/s]  8%|‚ñä         | 100/1319 [00:14<00:34, 35.34it/s]  8%|‚ñä         | 109/1319 [00:14<00:36, 33.38it/s]  9%|‚ñâ         | 116/1319 [00:14<00:40, 29.69it/s] 10%|‚ñâ         | 128/1319 [00:15<00:36, 32.64it/s] 10%|‚ñà         | 136/1319 [00:15<00:36, 32.67it/s] 11%|‚ñà         | 142/1319 [00:15<00:37, 30.98it/s] 11%|‚ñà‚ñè        | 149/1319 [00:15<00:37, 30.80it/s] 12%|‚ñà‚ñè        | 159/1319 [00:16<00:33, 34.35it/s] 13%|‚ñà‚ñé        | 171/1319 [00:16<00:29, 39.51it/s] 14%|‚ñà‚ñé        | 181/1319 [00:16<00:28, 40.52it/s] 15%|‚ñà‚ñç        | 192/1319 [00:16<00:26, 41.93it/s] 15%|‚ñà‚ñå        | 202/1319 [00:16<00:26, 42.63it/s] 16%|‚ñà‚ñã        | 217/1319 [00:17<00:24, 44.77it/s] 17%|‚ñà‚ñã        | 226/1319 [00:17<00:25, 42.97it/s] 18%|‚ñà‚ñä        | 241/1319 [00:17<00:22, 48.39it/s] 19%|‚ñà‚ñâ        | 257/1319 [00:18<00:21, 49.84it/s] 20%|‚ñà‚ñà        | 268/1319 [00:18<00:21, 49.04it/s] 21%|‚ñà‚ñà‚ñè       | 282/1319 [00:18<00:21, 47.79it/s] 22%|‚ñà‚ñà‚ñè       | 292/1319 [00:18<00:22, 46.59it/s] 23%|‚ñà‚ñà‚ñé       | 302/1319 [00:19<00:22, 45.82it/s] 24%|‚ñà‚ñà‚ñé       | 313/1319 [00:19<00:23, 42.79it/s] 24%|‚ñà‚ñà‚ñç       | 323/1319 [00:19<00:22, 44.85it/s] 25%|‚ñà‚ñà‚ñå       | 332/1319 [00:19<00:21, 45.45it/s] 26%|‚ñà‚ñà‚ñå       | 340/1319 [00:19<00:22, 44.23it/s] 27%|‚ñà‚ñà‚ñã       | 351/1319 [00:20<00:20, 47.89it/s] 28%|‚ñà‚ñà‚ñä       | 363/1319 [00:20<00:18, 51.80it/s] 28%|‚ñà‚ñà‚ñä       | 375/1319 [00:20<00:09, 100.30it/s] 28%|‚ñà‚ñà‚ñä       | 375/1319 [00:20<00:09, 100.30it/s] 28%|‚ñà‚ñà‚ñä       | 375/1319 [00:20<00:09, 100.30it/s] 28%|‚ñà‚ñà‚ñä       | 375/1319 [00:20<00:09, 100.30it/s] 28%|‚ñà‚ñà‚ñä       | 375/1319 [00:20<00:09, 100.30it/s] 28%|‚ñà‚ñà‚ñä       | 375/1319 [00:20<00:09, 100.30it/s] 28%|‚ñà‚ñà‚ñä       | 375/1319 [00:20<00:09, 100.30it/s] 28%|‚ñà‚ñà‚ñä       | 375/1319 [00:20<00:09, 100.30it/s] 28%|‚ñà‚ñà‚ñä       | 375/1319 [00:20<00:09, 100.30it/s] 28%|‚ñà‚ñà‚ñä       | 375/1319 [00:20<00:09, 100.30it/s] 29%|‚ñà‚ñà‚ñâ       | 386/1319 [00:20<00:10, 87.77it/s]  30%|‚ñà‚ñà‚ñâ       | 395/1319 [00:20<00:12, 75.59it/s] 31%|‚ñà‚ñà‚ñà       | 403/1319 [00:20<00:14, 65.40it/s] 31%|‚ñà‚ñà‚ñà‚ñè      | 413/1319 [00:20<00:14, 64.57it/s] 31%|‚ñà‚ñà‚ñà‚ñè      | 413/1319 [00:20<00:14, 64.57it/s] 31%|‚ñà‚ñà‚ñà‚ñè      | 413/1319 [00:20<00:14, 64.57it/s] 31%|‚ñà‚ñà‚ñà‚ñè      | 413/1319 [00:20<00:14, 64.57it/s] 31%|‚ñà‚ñà‚ñà‚ñè      | 413/1319 [00:20<00:14, 64.57it/s] 31%|‚ñà‚ñà‚ñà‚ñè      | 413/1319 [00:20<00:14, 64.57it/s] 32%|‚ñà‚ñà‚ñà‚ñè      | 420/1319 [00:21<00:16, 55.44it/s] 32%|‚ñà‚ñà‚ñà‚ñè      | 426/1319 [00:21<00:18, 48.23it/s] 33%|‚ñà‚ñà‚ñà‚ñé      | 431/1319 [00:21<00:21, 41.56it/s] 34%|‚ñà‚ñà‚ñà‚ñé      | 444/1319 [00:21<00:17, 49.70it/s] 34%|‚ñà‚ñà‚ñà‚ñç      | 451/1319 [00:21<00:12, 70.14it/s] 34%|‚ñà‚ñà‚ñà‚ñç      | 452/1319 [00:21<00:12, 70.14it/s] 34%|‚ñà‚ñà‚ñà‚ñç      | 452/1319 [00:21<00:12, 70.14it/s] 35%|‚ñà‚ñà‚ñà‚ñç      | 460/1319 [00:21<00:13, 61.54it/s] 35%|‚ñà‚ñà‚ñà‚ñå      | 467/1319 [00:22<00:15, 53.91it/s] 36%|‚ñà‚ñà‚ñà‚ñå      | 476/1319 [00:22<00:16, 51.60it/s] 37%|‚ñà‚ñà‚ñà‚ñã      | 492/1319 [00:22<00:13, 61.37it/s] 38%|‚ñà‚ñà‚ñà‚ñä      | 499/1319 [00:22<00:09, 84.08it/s] 38%|‚ñà‚ñà‚ñà‚ñä      | 499/1319 [00:22<00:09, 84.08it/s] 38%|‚ñà‚ñà‚ñà‚ñä      | 499/1319 [00:22<00:09, 84.08it/s] 39%|‚ñà‚ñà‚ñà‚ñä      | 508/1319 [00:22<00:11, 72.65it/s] 39%|‚ñà‚ñà‚ñà‚ñâ      | 516/1319 [00:22<00:12, 63.51it/s] 40%|‚ñà‚ñà‚ñà‚ñâ      | 523/1319 [00:23<00:14, 55.75it/s] 40%|‚ñà‚ñà‚ñà‚ñà      | 529/1319 [00:23<00:16, 48.41it/s] 40%|‚ñà‚ñà‚ñà‚ñà      | 534/1319 [00:23<00:18, 41.54it/s] 41%|‚ñà‚ñà‚ñà‚ñà      | 541/1319 [00:23<00:19, 39.96it/s] 42%|‚ñà‚ñà‚ñà‚ñà‚ñè     | 559/1319 [00:23<00:13, 56.30it/s] 43%|‚ñà‚ñà‚ñà‚ñà‚ñé     | 571/1319 [00:23<00:12, 58.34it/s] 44%|‚ñà‚ñà‚ñà‚ñà‚ñç     | 583/1319 [00:24<00:13, 56.30it/s] 45%|‚ñà‚ñà‚ñà‚ñà‚ñå     | 594/1319 [00:24<00:12, 60.04it/s] 46%|‚ñà‚ñà‚ñà‚ñà‚ñå     | 605/1319 [00:24<00:11, 59.84it/s] 46%|‚ñà‚ñà‚ñà‚ñà‚ñã     | 613/1319 [00:24<00:13, 54.23it/s] 48%|‚ñà‚ñà‚ñà‚ñà‚ñä     | 627/1319 [00:24<00:11, 60.38it/s] 48%|‚ñà‚ñà‚ñà‚ñà‚ñä     | 636/1319 [00:25<00:12, 56.52it/s] 49%|‚ñà‚ñà‚ñà‚ñà‚ñâ     | 644/1319 [00:25<00:12, 52.39it/s] 49%|‚ñà‚ñà‚ñà‚ñà‚ñâ     | 650/1319 [00:25<00:14, 45.36it/s] 50%|‚ñà‚ñà‚ñà‚ñà‚ñà     | 662/1319 [00:25<00:12, 50.88it/s] 51%|‚ñà‚ñà‚ñà‚ñà‚ñà     | 671/1319 [00:25<00:06, 93.66it/s] 51%|‚ñà‚ñà‚ñà‚ñà‚ñà     | 671/1319 [00:25<00:06, 93.66it/s] 51%|‚ñà‚ñà‚ñà‚ñà‚ñà     | 671/1319 [00:25<00:06, 93.66it/s] 51%|‚ñà‚ñà‚ñà‚ñà‚ñà     | 671/1319 [00:25<00:06, 93.66it/s] 51%|‚ñà‚ñà‚ñà‚ñà‚ñà     | 671/1319 [00:25<00:06, 93.66it/s] 51%|‚ñà‚ñà‚ñà‚ñà‚ñà     | 671/1319 [00:25<00:06, 93.66it/s] 51%|‚ñà‚ñà‚ñà‚ñà‚ñà     | 671/1319 [00:25<00:06, 93.66it/s] 51%|‚ñà‚ñà‚ñà‚ñà‚ñà     | 671/1319 [00:25<00:06, 93.66it/s] 52%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñè    | 681/1319 [00:25<00:07, 81.39it/s] 52%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñè    | 690/1319 [00:26<00:08, 71.70it/s] 53%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñé    | 698/1319 [00:26<00:09, 62.58it/s] 54%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñé    | 707/1319 [00:26<00:10, 58.66it/s] 54%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñç    | 713/1319 [00:26<00:12, 50.40it/s] 55%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñç    | 724/1319 [00:26<00:11, 52.86it/s] 56%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå    | 738/1319 [00:27<00:09, 59.11it/s] 57%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã    | 753/1319 [00:27<00:08, 65.57it/s] 58%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñä    | 765/1319 [00:27<00:08, 64.97it/s] 59%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñâ    | 777/1319 [00:27<00:08, 63.47it/s] 60%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñâ    | 791/1319 [00:27<00:07, 66.90it/s] 61%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    | 798/1319 [00:27<00:08, 58.37it/s] 61%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    | 807/1319 [00:28<00:09, 55.19it/s] 63%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñé   | 835/1319 [00:28<00:05, 87.63it/s] 64%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñç   | 850/1319 [00:28<00:05, 92.22it/s] 65%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå   | 860/1319 [00:28<00:05, 85.95it/s] 67%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã   | 880/1319 [00:28<00:04, 100.35it/s] 68%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñä   | 892/1319 [00:28<00:04, 100.12it/s] 68%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñä   | 903/1319 [00:28<00:04, 96.09it/s]  70%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñâ   | 918/1319 [00:29<00:03, 102.56it/s] 71%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   | 930/1319 [00:29<00:03, 100.97it/s] 72%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñè  | 953/1319 [00:29<00:02, 126.59it/s] 73%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñé  | 966/1319 [00:29<00:02, 118.75it/s] 74%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñç  | 979/1319 [00:29<00:02, 115.10it/s] 76%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå  | 997/1319 [00:29<00:02, 127.79it/s] 77%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã  | 1010/1319 [00:29<00:02, 121.34it/s] 78%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñä  | 1023/1319 [00:30<00:02, 102.84it/s] 79%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñâ  | 1039/1319 [00:30<00:02, 114.72it/s] 80%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñâ  | 1054/1319 [00:30<00:02, 122.55it/s] 81%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  | 1067/1319 [00:30<00:02, 121.68it/s] 82%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñè | 1080/1319 [00:30<00:01, 122.36it/s] 83%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñé | 1093/1319 [00:30<00:02, 108.62it/s] 84%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñç | 1105/1319 [00:30<00:01, 110.25it/s] 85%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñç | 1117/1319 [00:30<00:02, 100.48it/s] 86%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå | 1128/1319 [00:30<00:01, 101.68it/s] 87%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã | 1145/1319 [00:31<00:01, 108.26it/s] 88%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñä | 1156/1319 [00:31<00:01, 97.76it/s]  88%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñä | 1166/1319 [00:31<00:01, 80.27it/s] 89%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñâ | 1177/1319 [00:31<00:01, 80.26it/s] 90%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñâ | 1186/1319 [00:31<00:01, 77.78it/s] 90%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà | 1191/1319 [00:31<00:01, 95.66it/s] 90%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà | 1192/1319 [00:31<00:01, 95.66it/s] 90%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà | 1192/1319 [00:31<00:01, 95.66it/s] 90%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà | 1192/1319 [00:31<00:01, 95.66it/s] 90%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà | 1192/1319 [00:31<00:01, 95.66it/s] 91%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà | 1202/1319 [00:31<00:01, 83.64it/s] 92%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñè| 1211/1319 [00:32<00:01, 74.13it/s] 92%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñè| 1219/1319 [00:32<00:01, 66.72it/s] 93%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñé| 1230/1319 [00:32<00:01, 67.49it/s] 94%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñç| 1241/1319 [00:32<00:01, 74.97it/s] 95%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñç| 1249/1319 [00:32<00:01, 59.15it/s] 95%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå| 1256/1319 [00:32<00:01, 56.28it/s] 96%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå| 1264/1319 [00:32<00:00, 61.12it/s] 96%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã| 1271/1319 [00:33<00:00, 58.10it/s] 97%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã| 1278/1319 [00:33<00:00, 50.21it/s] 97%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã| 1284/1319 [00:33<00:00, 42.35it/s] 97%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã| 1286/1319 [00:33<00:00, 38.92it/s] 97%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã| 1286/1319 [00:33<00:00, 38.92it/s] 98%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñä| 1288/1319 [00:50<00:00, 38.92it/s]/sgl-workspace/sglang/python/sglang/lang/interpreter.py:410: UserWarning: Error in stream_executor: Traceback (most recent call last):
  File "/sgl-workspace/sglang/python/sglang/lang/interpreter.py", line 408, in _thread_worker_func
    self._execute(expr)
  File "/sgl-workspace/sglang/python/sglang/lang/interpreter.py", line 446, in _execute
    self._execute_gen(other)
  File "/sgl-workspace/sglang/python/sglang/lang/interpreter.py", line 574, in _execute_gen
    comp, meta_info = self.backend.generate(
  File "/sgl-workspace/sglang/python/sglang/lang/backend/runtime_endpoint.py", line 185, in generate
    res = http_request(
  File "/sgl-workspace/sglang/python/sglang/utils.py", line 169, in http_request
    resp = urllib.request.urlopen(req, data=data, cafile=verify)
  File "/usr/lib/python3.10/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "/usr/lib/python3.10/urllib/request.py", line 519, in open
    response = self._open(req, data)
  File "/usr/lib/python3.10/urllib/request.py", line 536, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "/usr/lib/python3.10/urllib/request.py", line 496, in _call_chain
    result = func(*args)
  File "/usr/lib/python3.10/urllib/request.py", line 1377, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "/usr/lib/python3.10/urllib/request.py", line 1352, in do_open
    r = h.getresponse()
  File "/usr/lib/python3.10/http/client.py", line 1375, in getresponse
    response.begin()
  File "/usr/lib/python3.10/http/client.py", line 318, in begin
    version, status, reason = self._read_status()
  File "/usr/lib/python3.10/http/client.py", line 287, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

  warnings.warn(f"Error in stream_executor: {get_exception_traceback()}")
 98%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñä| 1289/1319 [06:39<09:01, 18.04s/it]100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1319/1319 [06:40<00:00,  3.30it/s]
Traceback (most recent call last):
  File "/sgl-workspace/sglang/benchmark/gsm8k/bench_sglang.py", line 148, in <module>
    main(args)
  File "/sgl-workspace/sglang/benchmark/gsm8k/bench_sglang.py", line 99, in main
    preds.append(get_answer_value(states[i]["answer"]))
  File "/sgl-workspace/sglang/python/sglang/lang/interpreter.py", line 993, in __getitem__
    return self.get_var(name)
  File "/sgl-workspace/sglang/python/sglang/lang/interpreter.py", line 978, in get_var
    return self.stream_executor.get_var(name)
  File "/sgl-workspace/sglang/python/sglang/lang/interpreter.py", line 333, in get_var
    return self.variables[name]
KeyError: 'answer'
Run 1 completed in 456 seconds
Run 1: Accuracy not found, defaulting to 0
Run 1: Accuracy: 0
[progress] [=====---------------------------------------------] 1/10 (10%)  | GSM8K: Run 1
Executing GSM8K test Run 2 ...
Traceback (most recent call last):
  File "/usr/lib/python3.10/urllib/request.py", line 1348, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "/usr/lib/python3.10/http/client.py", line 1283, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1329, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1278, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1038, in _send_output
    self.send(msg)
  File "/usr/lib/python3.10/http/client.py", line 976, in send
    self.connect()
  File "/usr/lib/python3.10/http/client.py", line 942, in connect
    self.sock = self._create_connection(
  File "/usr/lib/python3.10/socket.py", line 845, in create_connection
    raise err
  File "/usr/lib/python3.10/socket.py", line 833, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/sgl-workspace/sglang/benchmark/gsm8k/bench_sglang.py", line 148, in <module>
    main(args)
  File "/sgl-workspace/sglang/benchmark/gsm8k/bench_sglang.py", line 48, in main
    set_default_backend(select_sglang_backend(args))
  File "/sgl-workspace/sglang/python/sglang/test/test_utils.py", line 408, in select_sglang_backend
    backend = RuntimeEndpoint(f"{args.host}:{args.port}")
  File "/sgl-workspace/sglang/python/sglang/lang/backend/runtime_endpoint.py", line 40, in __init__
    res = http_request(
  File "/sgl-workspace/sglang/python/sglang/utils.py", line 169, in http_request
    resp = urllib.request.urlopen(req, data=data, cafile=verify)
  File "/usr/lib/python3.10/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "/usr/lib/python3.10/urllib/request.py", line 519, in open
    response = self._open(req, data)
  File "/usr/lib/python3.10/urllib/request.py", line 536, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "/usr/lib/python3.10/urllib/request.py", line 496, in _call_chain
    result = func(*args)
  File "/usr/lib/python3.10/urllib/request.py", line 1377, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "/usr/lib/python3.10/urllib/request.py", line 1351, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [Errno 111] Connection refused>
Run 2 completed in 6 seconds
Run 2: Accuracy not found, defaulting to 0
Run 2: Accuracy: 0
[progress] [==========----------------------------------------] 2/10 (20%)  | GSM8K: Run 2
Executing GSM8K test Run 3 ...
Traceback (most recent call last):
  File "/usr/lib/python3.10/urllib/request.py", line 1348, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "/usr/lib/python3.10/http/client.py", line 1283, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1329, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1278, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1038, in _send_output
    self.send(msg)
  File "/usr/lib/python3.10/http/client.py", line 976, in send
    self.connect()
  File "/usr/lib/python3.10/http/client.py", line 942, in connect
    self.sock = self._create_connection(
  File "/usr/lib/python3.10/socket.py", line 845, in create_connection
    raise err
  File "/usr/lib/python3.10/socket.py", line 833, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/sgl-workspace/sglang/benchmark/gsm8k/bench_sglang.py", line 148, in <module>
    main(args)
  File "/sgl-workspace/sglang/benchmark/gsm8k/bench_sglang.py", line 48, in main
    set_default_backend(select_sglang_backend(args))
  File "/sgl-workspace/sglang/python/sglang/test/test_utils.py", line 408, in select_sglang_backend
    backend = RuntimeEndpoint(f"{args.host}:{args.port}")
  File "/sgl-workspace/sglang/python/sglang/lang/backend/runtime_endpoint.py", line 40, in __init__
    res = http_request(
  File "/sgl-workspace/sglang/python/sglang/utils.py", line 169, in http_request
    resp = urllib.request.urlopen(req, data=data, cafile=verify)
  File "/usr/lib/python3.10/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "/usr/lib/python3.10/urllib/request.py", line 519, in open
    response = self._open(req, data)
  File "/usr/lib/python3.10/urllib/request.py", line 536, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "/usr/lib/python3.10/urllib/request.py", line 496, in _call_chain
    result = func(*args)
  File "/usr/lib/python3.10/urllib/request.py", line 1377, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "/usr/lib/python3.10/urllib/request.py", line 1351, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [Errno 111] Connection refused>
Run 3 completed in 6 seconds
Run 3: Accuracy not found, defaulting to 0
Run 3: Accuracy: 0
[progress] [===============-----------------------------------] 3/10 (30%)  | GSM8K: Run 3
Executing GSM8K test Run 4 ...
Traceback (most recent call last):
  File "/usr/lib/python3.10/urllib/request.py", line 1348, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "/usr/lib/python3.10/http/client.py", line 1283, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1329, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1278, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1038, in _send_output
    self.send(msg)
  File "/usr/lib/python3.10/http/client.py", line 976, in send
    self.connect()
  File "/usr/lib/python3.10/http/client.py", line 942, in connect
    self.sock = self._create_connection(
  File "/usr/lib/python3.10/socket.py", line 845, in create_connection
    raise err
  File "/usr/lib/python3.10/socket.py", line 833, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/sgl-workspace/sglang/benchmark/gsm8k/bench_sglang.py", line 148, in <module>
    main(args)
  File "/sgl-workspace/sglang/benchmark/gsm8k/bench_sglang.py", line 48, in main
    set_default_backend(select_sglang_backend(args))
  File "/sgl-workspace/sglang/python/sglang/test/test_utils.py", line 408, in select_sglang_backend
    backend = RuntimeEndpoint(f"{args.host}:{args.port}")
  File "/sgl-workspace/sglang/python/sglang/lang/backend/runtime_endpoint.py", line 40, in __init__
    res = http_request(
  File "/sgl-workspace/sglang/python/sglang/utils.py", line 169, in http_request
    resp = urllib.request.urlopen(req, data=data, cafile=verify)
  File "/usr/lib/python3.10/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "/usr/lib/python3.10/urllib/request.py", line 519, in open
    response = self._open(req, data)
  File "/usr/lib/python3.10/urllib/request.py", line 536, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "/usr/lib/python3.10/urllib/request.py", line 496, in _call_chain
    result = func(*args)
  File "/usr/lib/python3.10/urllib/request.py", line 1377, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "/usr/lib/python3.10/urllib/request.py", line 1351, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [Errno 111] Connection refused>
Run 4 completed in 5 seconds
Run 4: Accuracy not found, defaulting to 0
Run 4: Accuracy: 0
[progress] [====================------------------------------] 4/10 (40%)  | GSM8K: Run 4
Executing GSM8K test Run 5 ...
Traceback (most recent call last):
  File "/usr/lib/python3.10/urllib/request.py", line 1348, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "/usr/lib/python3.10/http/client.py", line 1283, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1329, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1278, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1038, in _send_output
    self.send(msg)
  File "/usr/lib/python3.10/http/client.py", line 976, in send
    self.connect()
  File "/usr/lib/python3.10/http/client.py", line 942, in connect
    self.sock = self._create_connection(
  File "/usr/lib/python3.10/socket.py", line 845, in create_connection
    raise err
  File "/usr/lib/python3.10/socket.py", line 833, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/sgl-workspace/sglang/benchmark/gsm8k/bench_sglang.py", line 148, in <module>
    main(args)
  File "/sgl-workspace/sglang/benchmark/gsm8k/bench_sglang.py", line 48, in main
    set_default_backend(select_sglang_backend(args))
  File "/sgl-workspace/sglang/python/sglang/test/test_utils.py", line 408, in select_sglang_backend
    backend = RuntimeEndpoint(f"{args.host}:{args.port}")
  File "/sgl-workspace/sglang/python/sglang/lang/backend/runtime_endpoint.py", line 40, in __init__
    res = http_request(
  File "/sgl-workspace/sglang/python/sglang/utils.py", line 169, in http_request
    resp = urllib.request.urlopen(req, data=data, cafile=verify)
  File "/usr/lib/python3.10/urllib/request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "/usr/lib/python3.10/urllib/request.py", line 519, in open
    response = self._open(req, data)
  File "/usr/lib/python3.10/urllib/request.py", line 536, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "/usr/lib/python3.10/urllib/request.py", line 496, in _call_chain
    result = func(*args)
  File "/usr/lib/python3.10/urllib/request.py", line 1377, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "/usr/lib/python3.10/urllib/request.py", line 1351, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [Errno 111] Connection refused>
Run 5 completed in 6 seconds
Run 5: Accuracy not found, defaulting to 0
Run 5: Accuracy: 0
[progress] [=========================-------------------------] 5/10 (50%)  | GSM8K: Run 5
GSM8K test completed in 479 seconds
Average Accuracy over 5 runs: 0.000
Average accuracy (0.000) is below threshold (0.93).
‚ùå GSM8K benchmark failed or accuracy below threshold.
Cleaning up...
Background SGLang server (PID: 47) already stopped.
[nightly] === Online benchmark dispatched for DEEPSEEK; check logs in sgl-dev_v0.5.5.post2-rocm700-mi30x-20251112 ===
[nightly] === Starting post-processing (CSV processing, plot generation, Teams notifications) ===
[nightly] Processing online CSV data and generating plots... Logs will be saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.5.post2-rocm700-mi30x-20251112_DeepSeek-V3-0324_FP8_online/process_and_generate_online_plots.log
[nightly] Using plot date from image tag: 20251112
[nightly] Sending Teams notification for deepseek online plots...
[nightly] Adding benchmark date to Teams notification: 20251112
[nightly] Teams notification using plot directory: /mnt/raid/michael/sglang-ci/plots_server
[nightly] Using GitHub upload for plot images (repo: ROCm/sglang-ci)
[nightly] Images will be stored in main branch with structure: plot/mi30x/model/mode/filename.png
[nightly] Including intelligent analysis (7 days lookback)
üêô GitHub upload mode: Images will be uploaded to ROCm/sglang-ci
üêô GitHub upload mode: Images will be uploaded to GitHub and embedded in Teams
üìÅ Plot directory: /mnt/raid/michael/sglang-ci/plots_server
üóÇÔ∏è  Benchmark directory: /mnt/raid/michael/sglang-ci
   üîç Uploading 20251112_DeepSeek-V3-0324_online_standard.png to GitHub...
   üìã Log branch already exists
   üìù Updating existing file: plot/mi30x/DeepSeek-V3-0324/online/20251112_DeepSeek-V3-0324_online_standard.png
   ‚úÖ Uploaded to GitHub (log branch): 20251112_DeepSeek-V3-0324_online_standard.png
   üîó GitHub URL: https://github.com/ROCm/sglang-ci/blob/log/plot/mi30x/DeepSeek-V3-0324/online/20251112_DeepSeek-V3-0324_online_standard.png
üîç Discovered 1 plot file(s) for deepseek online
   - 20251112_DeepSeek-V3-0324_online_standard.png -> ‚úÖ uploaded to GitHub
üîç Analyzing benchmark results for accuracy and performance...
   Found timing_summary log for deepseek online on 20251112: timing_summary_20251112_174917.log
   Found timing_summary log for deepseek online on 20251112: timing_summary_20251112_174917.log
   Found timing_summary log for deepseek online on 20251112: timing_summary_20251112_174917.log
üîç Sending adaptive card with 1 image(s) hosted on GitHub
üìä Total payload size: 0.00MB
   üì∑ Image URL: https://github.com/ROCm/sglang-ci/blob/log/plot/mi30x/DeepSeek-V3-0324/online/20251112_DeepSeek-V3-0324_online_standard.png
   üíæ Debug: Card JSON saved to /tmp/teams_card_debug.json
‚úÖ Successfully sent Teams notification for deepseek online plots
   (Power Automate flow accepted - message processing asynchronously)
üéâ Teams notification sent successfully! (with intelligent analysis)
[nightly] Teams notification sent successfully for deepseek online
[nightly] === Online post-processing completed for DEEPSEEK ===
[nightly] ==========================================
[nightly] Completed benchmarks for image: rocm/sgl-dev:v0.5.5.post2-rocm700-mi30x-20251112
[nightly] Stopping container sgl-dev_v0.5.5.post2-rocm700-mi30x-20251112 to release resources...
[nightly] ==========================================
[nightly] ==========================================
[nightly] All benchmarks completed for 1 image(s)
[nightly] ==========================================
[nightly] Cleaning up process lock...
