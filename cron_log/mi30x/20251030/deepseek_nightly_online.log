[nightly] ==========================================
[nightly] SGL Nightly Benchmark Started
[nightly] ==========================================
[nightly] Command: scripts/perf_nightly.sh --model=deepseek --model-path=/mnt/raid/models/huggingface/deepseek-ai/DeepSeek-V3-0324 --mode=online --hardware=mi30x --teams-webhook-url=https://default3dd8961fe4884e608e11a82d994e18.3d.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/2115793fe51a4371bcedd8ff67ff0418/triggers/manual/paths/invoke?api-version=1&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=hzr6aH40CKrySSK64uAnsmVIR8ynAkIRTH65z-wqxNA
[nightly] Start time: 2025-10-30 15:15:01 PDT
[nightly] Machine: dell300x-pla-t10-23
[nightly] Working directory: /mnt/raid/michael/sglang-ci
[nightly] Script location: /mnt/raid/michael/sglang-ci/scripts/perf_nightly.sh
[nightly] Process ID: 3068881
[nightly] ==========================================

[nightly] Runtime Environment:
[nightly] User: amd | Groups: amd video users... | Docker: /usr/bin/docker
[nightly] Testing Docker daemon access...
[nightly] Docker daemon accessible - proceeding...
[nightly] Teams webhook URL provided via command line - notifications enabled
[nightly] Custom model path provided: /mnt/raid/models/huggingface/deepseek-ai/DeepSeek-V3-0324
[nightly] Hardware: mi30x, ROCM Version: rocm630
[nightly] Model: deepseek, Mode(s): online
[nightly] Created process lock: /tmp/perf_nightly_deepseek.lock
[nightly] GPU is busy. Attempting to stop running Docker containers...
[nightly] Stopping running containers: d8d133449a15
3658ae4270b4
[nightly] Waiting 15s for GPU to become idle...
[nightly] WARN: GPU may still be busy, but proceeding as requested.
[nightly] Searching for non-SRT images for deepseek for the last 1 days...
[nightly] Searching for non-SRT mi30x image in 'rocm/sgl-dev' for date 20251030...
[nightly] No image found for today. Checking yesterday as a fallback...
[nightly] Searching for non-SRT mi30x image in 'rocm/sgl-dev' for date 20251029...
[nightly] Fallback found candidate tag: v0.5.4.post1-rocm630-mi30x-20251029
[nightly] Found local image: rocm/sgl-dev:v0.5.4.post1-rocm630-mi30x-20251029
[nightly] Successfully obtained fallback image for date 20251029: rocm/sgl-dev:v0.5.4.post1-rocm630-mi30x-20251029
[nightly] Found 1 valid image(s) to run benchmarks on:
[nightly]   - rocm/sgl-dev:v0.5.4.post1-rocm630-mi30x-20251029

[nightly] ==========================================
[nightly] Starting benchmarks for image: rocm/sgl-dev:v0.5.4.post1-rocm630-mi30x-20251029
[nightly] ==========================================
[nightly] Checking GPU status before starting benchmarks for rocm/sgl-dev:v0.5.4.post1-rocm630-mi30x-20251029...
[nightly] GPU is busy. Attempting to stop running Docker containers...
[nightly] Stopping running containers: 0f1a23468207
[nightly] Waiting 15s for GPU to become idle...
[nightly] WARN: GPU may still be busy, but proceeding as requested.
[nightly] Checking benchmark completion in: /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_online
[nightly] Found 0 completed benchmark runs
[nightly] INFO: Found 0/15 completed runs for rocm/sgl-dev:v0.5.4.post1-rocm630-mi30x-20251029 (online). Proceeding with benchmarks.
[nightly] Using Docker image: rocm/sgl-dev:v0.5.4.post1-rocm630-mi30x-20251029
[nightly] Container name: sgl-dev_v0.5.4.post1-rocm630-mi30x-20251029
[nightly] Reusing container sgl-dev_v0.5.4.post1-rocm630-mi30x-20251029
[nightly] === Starting benchmark execution ===
[nightly] === Starting nightly DEEPSEEK online benchmark ===
[nightly] Launching deepseek_perf_online_csv.sh inside sgl-dev_v0.5.4.post1-rocm630-mi30x-20251029
[nightly] Passing --model-name='DeepSeek-V3-0324' to DeepSeek benchmark
âœ… Parameter validation passed
[online] Script started at: 2025-10-30 15:16:02 PDT
Scanning existing logs to check if all benchmarks are already complete...
Checking GSM8K log status...
âœ… GSM8K log file is complete with final accuracy summary
Checking serving benchmark logs...
Scan complete: 5 total runs needed, 0 missing/incomplete
âœ… All benchmark logs (serving + GSM8K) are present and complete! No server startup needed.
Skipping server startup and benchmark execution - generating CSV from existing logs...
[online] Structured CSV initialized at /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_online/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_serving.csv
Extracting metrics for concurrency 128 from existing logs...
[online] Updating CSV for concurrency 128: E2E=62330.23ms, TTFT=10986.32ms, ITL=51.85ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 128
Extracting metrics for concurrency 64 from existing logs...
[online] Updating CSV for concurrency 64: E2E=44535.21ms, TTFT=6004.53ms, ITL=42.76ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 64
Extracting metrics for concurrency 16 from existing logs...
[online] Updating CSV for concurrency 16: E2E=23514.32ms, TTFT=1954.93ms, ITL=26.17ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 16
Extracting metrics for concurrency 4 from existing logs...
[online] Updating CSV for concurrency 4: E2E=16709.06ms, TTFT=188.20ms, ITL=20.67ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 4
Extracting metrics for concurrency 1 from existing logs...
[online] Updating CSV for concurrency 1: E2E=16482.47ms, TTFT=104.96ms, ITL=20.50ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 1
âœ… CSV generated from existing logs successfully.
Serving benchmark results written to /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_online/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_serving.csv
Note: Both GSM8K and serving benchmarks were already complete
âœ… Serving benchmark completed successfully in 0 seconds (standard mode).
Structured serving benchmark results written to /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_online/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_serving.csv
Individual concurrency logs saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_online/sglang_serving_benchmark_concurrency_*_run*.log
GSM8K accuracy results written to /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_online/sglang_client_log_DeepSeek-V3-0324_gsm8k.log
Shutting down SGLang server...
Server shutdown completed in 0 seconds

==========================================
SCRIPT EXECUTION SUMMARY
==========================================
Script completed at: 2025-10-30 15:16:02 PDT
Total execution time: 0 seconds (0 minutes)
Output directory: /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_online
Serving CSV: /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_online/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_serving.csv
Timing log: /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_online/timing_summary_20251030_151602.log
===========================================
Cleaning up...
[nightly] === Online benchmark dispatched for DEEPSEEK; check logs in sgl-dev_v0.5.4.post1-rocm630-mi30x-20251029 ===
[nightly] === Starting post-processing (CSV processing, plot generation, Teams notifications) ===
[nightly] Processing online CSV data and generating plots... Logs will be saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-V3-0324/v0.5.4.post1-rocm630-mi30x-20251029_DeepSeek-V3-0324_FP8_online/process_and_generate_online_plots.log
[nightly] Using plot date from image tag: 20251029
[nightly] Sending Teams notification for deepseek online plots...
[nightly] Adding benchmark date to Teams notification: 20251029
[nightly] Teams notification using plot directory: /mnt/raid/michael/sglang-ci/plots_server
[nightly] Using GitHub upload for plot images (repo: ROCm/sglang-ci)
[nightly] Images will be stored in main branch with structure: plot/mi30x/model/mode/filename.png
[nightly] Including intelligent analysis (7 days lookback)
ğŸ™ GitHub upload mode: Images will be uploaded to ROCm/sglang-ci
ğŸ™ GitHub upload mode: Images will be uploaded to GitHub and embedded in Teams
ğŸ“ Plot directory: /mnt/raid/michael/sglang-ci/plots_server
ğŸ—‚ï¸  Benchmark directory: /mnt/raid/michael/sglang-ci
   ğŸ” Uploading 20251030_DeepSeek-V3-0324_online_standard.png to GitHub...
   ğŸ“‹ Log branch already exists
   ğŸ“ Updating existing file: plot/mi30x/DeepSeek-V3-0324/online/20251030_DeepSeek-V3-0324_online_standard.png
   âœ… Uploaded to GitHub (log branch): 20251030_DeepSeek-V3-0324_online_standard.png
   ğŸ”— GitHub URL: https://github.com/ROCm/sglang-ci/blob/log/plot/mi30x/DeepSeek-V3-0324/online/20251030_DeepSeek-V3-0324_online_standard.png
ğŸ” Discovered 1 plot file(s) for deepseek online
   - 20251030_DeepSeek-V3-0324_online_standard.png -> âœ… uploaded to GitHub
ğŸ” Analyzing benchmark results for accuracy and performance...
   Found timing_summary log for deepseek online on 20251029: timing_summary_20251030_151602.log
   Found timing_summary log for deepseek online on 20251029: timing_summary_20251030_151602.log
   Found timing_summary log for deepseek online on 20251029: timing_summary_20251030_151602.log
   Found timing_summary log for deepseek online on 20251029: timing_summary_20251030_151602.log
ğŸ” Sending adaptive card with 1 image(s) hosted on GitHub
ğŸ“Š Total payload size: 0.00MB
   ğŸ“· Image URL: https://github.com/ROCm/sglang-ci/blob/log/plot/mi30x/DeepSeek-V3-0324/online/20251030_DeepSeek-V3-0324_online_standard.png
   ğŸ’¾ Debug: Card JSON saved to /tmp/teams_card_debug.json
âœ… Successfully sent Teams notification for deepseek online plots
   (Power Automate flow accepted - message processing asynchronously)
ğŸ‰ Teams notification sent successfully! (with intelligent analysis)
[nightly] Teams notification sent successfully for deepseek online
[nightly] === Online post-processing completed for DEEPSEEK ===
[nightly] ==========================================
[nightly] Completed benchmarks for image: rocm/sgl-dev:v0.5.4.post1-rocm630-mi30x-20251029
[nightly] Stopping container sgl-dev_v0.5.4.post1-rocm630-mi30x-20251029 to release resources...
[nightly] ==========================================
[nightly] ==========================================
[nightly] All benchmarks completed for 1 image(s)
[nightly] ==========================================
[nightly] Cleaning up process lock...
